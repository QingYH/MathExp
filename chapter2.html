<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯¼æ•°ä¸å¾®åˆ†ï¼šä»"å¯¼"ç«çº¿åˆ°"å¾®"ç§¯åˆ†</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" async></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f8961e;
            --border-radius: 12px;
            --shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "f'(x)";
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 60px;
            color: rgba(67, 97, 238, 0.1);
            font-weight: bold;
        }
        
        h1 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 2.8rem;
            position: relative;
            display: inline-block;
        }
        
        h1::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 25%;
            width: 50%;
            height: 4px;
            background: var(--accent);
            border-radius: 2px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #666;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        .sidebar {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            height: fit-content;
            position: sticky;
            top: 20px;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2 i {
            color: var(--accent);
        }
        
        .definition, .theorem, .formula, .exercise {
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 10px;
            position: relative;
        }
        
        .definition {
            background-color: rgba(67, 97, 238, 0.08);
            border-left: 5px solid var(--primary);
        }
        
        .theorem {
            background-color: rgba(248, 150, 30, 0.08);
            border-left: 5px solid var(--warning);
        }
        
        .formula {
            background-color: rgba(76, 201, 240, 0.08);
            border-left: 5px solid var(--success);
            font-family: 'Cambria Math', serif;
            overflow-x: auto;
        }
        
        .exercise {
            background-color: rgba(248, 37, 133, 0.05);
            border-left: 5px solid var(--accent);
        }
        
        .definition h3, .theorem h3, .formula h3, .exercise h3 {
            margin-bottom: 10px;
            color: inherit;
        }
        
        .definition h3 i, .theorem h3 i, .formula h3 i, .exercise h3 i {
            margin-right: 8px;
        }
        
        .self-review {
            background: rgba(248, 37, 133, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-style: italic;
            border: 1px dashed var(--accent);
            position: relative;
        }
        
        .self-review::before {
            content: "ğŸ’¡ çµé­‚æ‹·é—®ï¼š";
            font-weight: bold;
            color: var(--accent);
        }
        
        .analogy {
            background: rgba(76, 201, 240, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border: 1px dashed var(--success);
            position: relative;
        }
        
        .analogy::before {
            content: "ğŸ” ç¥æ¯”å–»ï¼š";
            font-weight: bold;
            color: var(--success);
        }
        
        .graph-container {
            width: 100%;
            height: 300px;
            background: white;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ddd;
            overflow: hidden;
            position: relative;
        }
        
        .graph-controls {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .graph-controls button, .graph-controls select {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
        }
        
        .graph-controls button:hover {
            background: #f5f5f5;
        }
        
        .btn {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .answer {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: rgba(76, 201, 240, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--success);
        }
        
        .answer.show {
            display: block;
        }
        
        .show-answer {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .show-answer:hover {
            background: var(--primary);
            color: white;
        }
        
        .error-tip {
            background: rgba(248, 37, 133, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--accent);
        }
        
        .error-tip h4 {
            color: var(--accent);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .chapter-nav {
            list-style: none;
            margin-top: 20px;
        }
        
        .chapter-nav li {
            margin-bottom: 12px;
        }
        
        .chapter-nav a {
            display: block;
            padding: 12px 15px;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 8px;
            color: var(--dark);
            text-decoration: none;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .chapter-nav a:hover, .chapter-nav a.active {
            background: rgba(67, 97, 238, 0.2);
            border-left: 4px solid var(--primary);
        }
        
        .chapter-nav i {
            margin-right: 10px;
            color: var(--primary);
            width: 20px;
            text-align: center;
        }
        
        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 30px 0 20px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--success));
            width: 25%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #ddd;
        }
        
        @media (max-width: 992px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
        }
        
        .canvas-container {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .fun-fact {
            background: rgba(248, 150, 30, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--warning);
        }
        
        .fun-fact::before {
            content: "ğŸ¤” å†·çŸ¥è¯†ï¼š";
            font-weight: bold;
            color: var(--warning);
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-chart-line"></i> å¯¼æ•°ä¸å¾®åˆ†ï¼šæ•°å­¦ç•Œçš„"é€Ÿåº¦ä¸æ¿€æƒ…"</h1>
        <p class="subtitle">åŒæµé«˜æ•°ç¬¬ä¸ƒ/å…«ç‰ˆä¸Šå†Œç¬¬äºŒç«  Â· ç”¨æ®µå­è®²æ•°å­¦ï¼Œç”¨æ¯”å–»ç ´éš¾ç‚¹ Â· é™„å¸¦çµé­‚æ‹·é—®å’ŒåŠ¨æ€å›¾å½¢æ¼”ç¤º</p>
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <p>å­¦ä¹ è¿›åº¦: <span id="progress-text">25%</span> Â· å·²æŒæ¡çŸ¥è¯†ç‚¹: <span id="mastered-count">0</span>/12</p>
    </header>
    
    <div class="container">
        <main class="main-content">
            <!-- ç¬¬ä¸€èŠ‚ï¼šå¯¼æ•°æ¦‚å¿µ -->
            <section class="card" id="section1">
                <h2><i class="fas fa-bullseye"></i> ç¬¬ä¸€èŠ‚ï¼šå¯¼æ•°æ¦‚å¿µ - "ç¬æ—¶é€Ÿåº¦"çš„æ•°å­¦é©¬ç”²</h2>
                
                <div class="definition">
                    <h3><i class="fas fa-book"></i> å¯¼æ•°å®šä¹‰ï¼šæé™çš„"ç§ç”Ÿå­"</h3>
                    <p>å‡½æ•° \(y = f(x)\) åœ¨ç‚¹ \(x_0\) å¤„çš„å¯¼æ•°å®šä¹‰ä¸ºï¼š</p>
                    <div class="formula">
                        <p>\[f'(x_0) = \lim_{\Delta x \to 0} \frac{f(x_0 + \Delta x) - f(x_0)}{\Delta x} = \lim_{x \to x_0} \frac{f(x) - f(x_0)}{x - x_0}\]</p>
                    </div>
                    <p>ç¿»è¯‘æˆäººè¯ï¼šå½“ \(x\) å˜åŒ–ä¸€ç‚¹ç‚¹æ—¶ï¼Œ\(y\) å˜åŒ–äº†å¤šå°‘å€ï¼Ÿè¿™ä¸ª"å€æ•°"å°±æ˜¯å¯¼æ•°ã€‚</p>
                    
                    <div class="analogy">
                        <p><strong>æ¯”å–»æ—¶åˆ»ï¼š</strong> æŠŠå‡½æ•°æƒ³è±¡æˆä¸€æ¡å±±è·¯ï¼Œå¯¼æ•°å°±æ˜¯ä½ åœ¨æŸä¸ªç‚¹çš„<strong>é™¡å³­ç¨‹åº¦</strong>ã€‚å¯¼æ•°è¶Šå¤§ï¼Œå¡è¶Šé™¡ï¼›å¯¼æ•°ä¸ºè´Ÿï¼Œå°±æ˜¯ä¸‹å¡ï¼›å¯¼æ•°ä¸ºé›¶ï¼Œæ­å–œä½ æ‰¾åˆ°å¹³å¦å¤„ï¼ˆæå€¼ç‚¹å¯èƒ½å°±åœ¨è¿™ï¼‰ï¼</p>
                    </div>
                    
                    <div class="self-review">
                        æ›¾ç»æˆ‘ä»¥ä¸ºå¯¼æ•°å°±æ˜¯æ–œç‡ï¼Œç›´åˆ°é‡åˆ°äº† \(|x|\) åœ¨ \(x=0\) å¤„... åŸæ¥æ•°å­¦ä¹Ÿæœ‰"å°–é…¸åˆ»è–„"ï¼ˆå°–ç‚¹ï¼‰çš„æ—¶å€™ï¼å·¦å¯¼æ•°å’Œå³å¯¼æ•°ä¸ç›¸ç­‰ï¼Œå°±åƒä½ å·¦å³è„šç©¿ä¸åŒå°ºç çš„é‹ï¼Œèµ°èµ·è·¯æ¥è‚¯å®šåˆ«æ‰­ã€‚
                    </div>
                </div>
                
                <div class="graph-container">
                    <div class="canvas-container">
                        <canvas id="derivative-graph"></canvas>
                    </div>
                </div>
                
                <div class="graph-controls">
                    <span>å‡½æ•°é€‰æ‹©ï¼š</span>
                    <select id="function-select">
                        <option value="x^2">f(x) = xÂ² (ç»å…¸æŠ›ç‰©çº¿)</option>
                        <option value="sin(x)">f(x) = sin(x) (æ³¢æµªçº¿)</option>
                        <option value="abs(x)">f(x) = |x| (Vå­—ä»‡æ€é˜Ÿ)</option>
                        <option value="x^3">f(x) = xÂ³ (æ€§æ„ŸSæ›²çº¿)</option>
                    </select>
                    <button onclick="updateDerivativeGraph()">æ›´æ–°å›¾å½¢</button>
                    <div style="margin-left: auto;">
                        <label>åˆ‡ç‚¹xåæ ‡: <input type="range" id="tangent-slider" min="-2" max="2" step="0.1" value="1" style="width: 150px;"></label>
                        <span id="tangent-value">1.0</span>
                    </div>
                </div>
                
                <div class="theorem">
                    <h3><i class="fas fa-gavel"></i> å®šç†ï¼šå¯å¯¼ä¸è¿ç»­çš„"çˆ±æ¨æƒ…ä»‡"</h3>
                    <p><strong>å¯å¯¼ â‡’ è¿ç»­ï¼š</strong> å¦‚æœå‡½æ•°åœ¨æŸç‚¹å¯å¯¼ï¼Œé‚£ä¹ˆå®ƒåœ¨è¯¥ç‚¹ä¸€å®šè¿ç»­ã€‚</p>
                    <p><strong>è¿ç»­ â‡ å¯å¯¼ï¼š</strong> è¿ç»­ä¸ä¸€å®šå¯å¯¼ï¼å°±åƒä¸€ä¸ªäººè¿ç»­ä¸Šç­30å¤©ï¼Œä½†å¯èƒ½æ¯å¤©è¿Ÿåˆ°ï¼ˆä¸å¯å¯¼ï¼‰ã€‚</p>
                    
                    <div class="fun-fact">
                        å†å²å…«å¦ï¼šç‰›é¡¿å’Œè±å¸ƒå°¼èŒ¨ä¸ºäº‰å¤ºå¾®ç§¯åˆ†å‘æ˜æƒåµå¾—ä¸å¯å¼€äº¤ï¼Œä½†ä»–ä»¬éƒ½æ‰¿è®¤ï¼šè¿ç»­æ˜¯å¯å¯¼çš„å¿…è¦ä¸å……åˆ†æ¡ä»¶ã€‚è¿™å¤§æ¦‚æ˜¯æ•°å­¦å²ä¸Šæœ€æ—©çš„"å¿…è¦ä¸å……åˆ†"å…³ç³»äº†ï¼
                    </div>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 1.1ï¼šå¯¼æ•°å®šä¹‰çš„"ç›´çƒå¯¹å†³"</h3>
                    <p>ç”¨å®šä¹‰æ±‚å‡½æ•° \(f(x) = x^2 + 2x\) åœ¨ \(x = 1\) å¤„çš„å¯¼æ•°ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer1-1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer1-1">
                        <p><strong>è§£ï¼š</strong> æ ¹æ®å¯¼æ•°å®šä¹‰ï¼š</p>
                        <p>\[
                        \begin{aligned}
                        f'(1) &= \lim_{\Delta x \to 0} \frac{f(1+\Delta x) - f(1)}{\Delta x} \\
                        &= \lim_{\Delta x \to 0} \frac{[(1+\Delta x)^2 + 2(1+\Delta x)] - (1^2+2 \cdot 1)}{\Delta x} \\
                        &= \lim_{\Delta x \to 0} \frac{[1 + 2\Delta x + (\Delta x)^2 + 2 + 2\Delta x] - 3}{\Delta x} \\
                        &= \lim_{\Delta x \to 0} \frac{4\Delta x + (\Delta x)^2}{\Delta x} \\
                        &= \lim_{\Delta x \to 0} (4 + \Delta x) = 4
                        \end{aligned}
                        \]</p>
                        <p>æ‰€ä»¥ \(f'(1) = 4\)ã€‚</p>
                    </div>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 1.2ï¼šåˆ¤æ–­å¯å¯¼æ€§çš„"ç«çœ¼é‡‘ç›"</h3>
                    <p>åˆ¤æ–­å‡½æ•° \(f(x) = |x-1|\) åœ¨ \(x=1\) å¤„æ˜¯å¦å¯å¯¼ï¼Œå¹¶è¯´æ˜ç†ç”±ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer1-2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer1-2">
                        <p><strong>è§£ï¼š</strong> å‡½æ•° \(f(x) = |x-1|\) åœ¨ \(x=1\) å¤„è¿ç»­ä½†ä¸å¯å¯¼ã€‚</p>
                        <p><strong>ç†ç”±ï¼š</strong></p>
                        <p>1. è¿ç»­æ€§ï¼š\(\lim_{x \to 1} |x-1| = 0 = f(1)\)ï¼Œæ‰€ä»¥è¿ç»­ã€‚</p>
                        <p>2. å¯å¯¼æ€§ï¼šè®¡ç®—å·¦å¯¼æ•°å’Œå³å¯¼æ•°</p>
                        <p>å·¦å¯¼æ•°ï¼š\(f'_-(1) = \lim_{x \to 1^-} \frac{|x-1|-0}{x-1} = \lim_{x \to 1^-} \frac{-(x-1)}{x-1} = -1\)</p>
                        <p>å³å¯¼æ•°ï¼š\(f'_+(1) = \lim_{x \to 1^+} \frac{|x-1|-0}{x-1} = \lim_{x \to 1^+} \frac{x-1}{x-1} = 1\)</p>
                        <p>å› ä¸ºå·¦å¯¼æ•° â‰  å³å¯¼æ•°ï¼Œæ‰€ä»¥ä¸å¯å¯¼ã€‚</p>
                        <p><strong>å‡ ä½•è§£é‡Šï¼š</strong> å‡½æ•°åœ¨ \(x=1\) å¤„æœ‰ä¸€ä¸ª"å°–ç‚¹"ï¼Œå°±åƒå±±çš„é¡¶å³°æ˜¯å°–çš„ï¼Œä»å·¦è¾¹å’Œå³è¾¹çˆ¬ä¸Šå»çš„é™¡å³­ç¨‹åº¦ä¸åŒã€‚</p>
                    </div>
                </div>
                
                <div class="error-tip">
                    <h4><i class="fas fa-exclamation-triangle"></i> æ˜“é”™ç‚¹æé†’ï¼šå¯¼æ•°çš„"ä¸‰å¤§é”™è§‰"</h4>
                    <p>1. <strong>é”™è§‰ä¸€ï¼š</strong> "è¿ç»­ä¸€å®šå¯å¯¼" â†’ é”™ï¼åä¾‹ï¼š\(|x|\) åœ¨ \(x=0\) å¤„ã€‚</p>
                    <p>2. <strong>é”™è§‰äºŒï¼š</strong> "å¯¼æ•°å°±æ˜¯åˆ‡çº¿æ–œç‡" â†’ å¯¹ï¼Œä½†å‰ææ˜¯å¯¼æ•°å­˜åœ¨ï¼æ²¡æœ‰å¯¼æ•°å°±æ²¡æœ‰åˆ‡çº¿ã€‚</p>
                    <p>3. <strong>é”™è§‰ä¸‰ï¼š</strong> "ç”¨å®šä¹‰æ±‚å¯¼å¤ªéº»çƒ¦ï¼Œç›´æ¥å¥—å…¬å¼" â†’ è€ƒè¯•å°±å–œæ¬¢è€ƒå®šä¹‰ï¼Œå› ä¸ºèƒ½çœ‹å‡ºä½ æ˜¯å¦çœŸæ‡‚ï¼</p>
                </div>
                
                <button class="btn" onclick="markAsMastered('section1')"><i class="fas fa-check-circle"></i> æ ‡è®°æœ¬èŠ‚ä¸ºå·²æŒæ¡</button>
            </section>
            
            <!-- ç¬¬äºŒèŠ‚ï¼šæ±‚å¯¼æ³•åˆ™ -->
            <section class="card" id="section2">
                <h2><i class="fas fa-cogs"></i> ç¬¬äºŒèŠ‚ï¼šæ±‚å¯¼æ³•åˆ™ - æ•°å­¦ç•Œçš„"å››åˆ™è¿ç®—PLUS"</h2>
                
                <div class="theorem">
                    <h3><i class="fas fa-gavel"></i> å››åˆ™è¿ç®—æ±‚å¯¼æ³•åˆ™ï¼šåŠ å‡ä¹˜é™¤çš„"æˆé•¿çƒ¦æ¼"</h3>
                    <p>è®¾ \(u = u(x)\), \(v = v(x)\) éƒ½å¯å¯¼ï¼Œåˆ™ï¼š</p>
                    <div class="formula">
                        <p>1. \((u \pm v)' = u' \pm v'\) <span style="color:#666; font-style:italic;">ï¼ˆåŠ å‡æœ€ç®€å•ï¼Œå„è‡ªæ±‚å¯¼å†åŠ å‡ï¼‰</span></p>
                        <p>2. \((uv)' = u'v + uv'\) <span style="color:#666; font-style:italic;">ï¼ˆå‰å¯¼åä¸å¯¼ + å‰ä¸å¯¼åå¯¼ï¼‰</span></p>
                        <p>3. \(\left(\frac{u}{v}\right)' = \frac{u'v - uv'}{v^2} \quad (v \neq 0)\) <span style="color:#666; font-style:italic;">ï¼ˆä¸Šå¯¼ä¸‹ä¸å¯¼ - ä¸Šä¸å¯¼ä¸‹å¯¼ï¼Œåˆ†æ¯å¹³æ–¹ä¸èƒ½å°‘ï¼‰</span></p>
                    </div>
                    
                    <div class="analogy">
                        <p><strong>æ¯”å–»æ—¶åˆ»ï¼š</strong> æŠŠå‡½æ•°æ±‚å¯¼æƒ³è±¡æˆçˆ¶æ¯ç…§é¡¾å­©å­ï¼š</p>
                        <p>â€¢ åŠ å‡æ³•åˆ™ï¼šå¤šä¸ªå­©å­å„è‡ªç…§é¡¾ï¼Œäº’ä¸å¹²æ‰°</p>
                        <p>â€¢ ä¹˜æ³•æ³•åˆ™ï¼šå¤«å¦»è½®æµç…§é¡¾å­©å­ï¼ˆä¸€ä¸ªå¯¼ï¼Œå¦ä¸€ä¸ªä¸å¯¼ï¼‰</p>
                        <p>â€¢ é™¤æ³•æ³•åˆ™ï¼šå­©å­æˆç»©=åˆ†æ•°ï¼Œåˆ†å­å¥½ï¼ˆå¯¼ï¼‰åˆ†æ¯ä¸å¥½ï¼ˆä¸å¯¼ï¼‰è¦å‡åˆ†ï¼Œåˆ†æ¯è¿˜è¦å¹³æ–¹ï¼ˆå¼ºè°ƒé‡è¦æ€§ï¼‰</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h3><i class="fas fa-gavel"></i> é“¾å¼æ³•åˆ™ï¼šå‡½æ•°çš„"ä¿„ç½—æ–¯å¥—å¨ƒ"</h3>
                    <p>å¦‚æœ \(y = f(u)\), \(u = g(x)\) éƒ½å¯å¯¼ï¼Œåˆ™å¤åˆå‡½æ•° \(y = f[g(x)]\) çš„å¯¼æ•°ä¸ºï¼š</p>
                    <div class="formula">
                        <p>\[\frac{dy}{dx} = \frac{dy}{du} \cdot \frac{du}{dx} \quad \text{æˆ–} \quad y'_x = f'(u) \cdot g'(x)\]</p>
                    </div>
                    <p>å£è¯€ï¼š<strong>å¤–å¯¼å†…ä¸å¯¼ï¼Œä¹˜ä»¥å†…å¯¼</strong>ï¼ˆä¸€å±‚ä¸€å±‚å‰¥æ´‹è‘±ï¼‰</p>
                    
                    <div class="self-review">
                        æ›¾ç»æˆ‘æ€»å¿˜è®°ä¹˜å†…å‡½æ•°çš„å¯¼æ•°ï¼Œç»“æœæ±‚å‡ºæ¥çš„å¯¼æ•°å°‘äº†ä¸€æˆªï¼Œå°±åƒå‰¥æ´‹è‘±åªå‰¥äº†æœ€å¤–é¢ä¸€å±‚ï¼Œè¾£çœ¼ç›è¿˜ä¸å¯¹å‘³ï¼ç°åœ¨æˆ‘æ˜ç™½äº†ï¼šå¤åˆå‡½æ•°æ±‚å¯¼å°±åƒå‰¥æ´‹è‘±ï¼Œä¸å‰¥åˆ°æœ€é‡Œé¢ä¼šæµæ³ªçš„ã€‚
                    </div>
                </div>
                
                <div class="graph-container">
                    <div class="canvas-container">
                        <canvas id="chain-rule-graph"></canvas>
                    </div>
                </div>
                
                <div class="graph-controls">
                    <span>å¤åˆå‡½æ•°é€‰æ‹©ï¼š</span>
                    <select id="chain-function-select">
                        <option value="sin(2x)">y = sin(2x)</option>
                        <option value="e^(x^2)">y = e^(xÂ²)</option>
                        <option value="sqrt(1+x^2)">y = âˆš(1+xÂ²)</option>
                        <option value="ln(cos(x))">y = ln(cos(x))</option>
                    </select>
                    <button onclick="updateChainRuleGraph()">æ›´æ–°æ¼”ç¤º</button>
                    <div>
                        <label>åˆ†è§£æ­¥éª¤ï¼š</label>
                        <input type="range" id="chain-step-slider" min="0" max="3" step="1" value="0" style="width: 120px;">
                        <span id="chain-step-text">åŸå§‹å‡½æ•°</span>
                    </div>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 2.1ï¼šä¹˜ç§¯æ³•åˆ™çš„"å®æˆ˜æ¼”ç»ƒ"</h3>
                    <p>æ±‚å‡½æ•° \(y = x^2 \cdot e^x\) çš„å¯¼æ•°ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer2-1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer2-1">
                        <p><strong>è§£ï¼š</strong> ä½¿ç”¨ä¹˜ç§¯æ³•åˆ™ï¼š\((uv)' = u'v + uv'\)</p>
                        <p>ä»¤ \(u = x^2\), \(v = e^x\)ï¼Œåˆ™ \(u' = 2x\), \(v' = e^x\)</p>
                        <p>\[
                        \begin{aligned}
                        y' &= u'v + uv' \\
                        &= (2x)(e^x) + (x^2)(e^x) \\
                        &= 2xe^x + x^2e^x \\
                        &= e^x(2x + x^2)
                        \end{aligned}
                        \]</p>
                        <p>æ‰€ä»¥ \(y' = e^x(x^2 + 2x)\)ã€‚</p>
                        <p><strong>æ£€éªŒï¼š</strong> ä¹Ÿå¯ä»¥å…ˆåŒ–ç®€å†æ±‚å¯¼ï¼š\(y = x^2e^x\)ï¼Œæ±‚å¯¼å¾— \(y' = 2xe^x + x^2e^x\)ï¼Œç»“æœä¸€è‡´ã€‚</p>
                    </div>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 2.2ï¼šé“¾å¼æ³•åˆ™çš„"å‰¥æ´‹è‘±å¤§èµ›"</h3>
                    <p>æ±‚å‡½æ•° \(y = \ln(\sin(3x))\) çš„å¯¼æ•°ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer2-2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer2-2">
                        <p><strong>è§£ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªä¸‰å±‚å¤åˆå‡½æ•°ï¼Œéœ€è¦å‰¥ä¸‰æ¬¡æ´‹è‘±ï¼š</p>
                        <p>æœ€å¤–å±‚ï¼š\(\ln(\cdot)\)ï¼Œå¯¼æ•°ä¸º \(\frac{1}{\cdot}\)</p>
                        <p>ä¸­é—´å±‚ï¼š\(\sin(\cdot)\)ï¼Œå¯¼æ•°ä¸º \(\cos(\cdot)\)</p>
                        <p>æœ€å†…å±‚ï¼š\(3x\)ï¼Œå¯¼æ•°ä¸º \(3\)</p>
                        <p>åº”ç”¨é“¾å¼æ³•åˆ™ï¼š</p>
                        <p>\[
                        \begin{aligned}
                        y' &= \frac{1}{\sin(3x)} \cdot \cos(3x) \cdot 3 \\
                        &= \frac{3\cos(3x)}{\sin(3x)} \\
                        &= 3\cot(3x)
                        \end{aligned}
                        \]</p>
                        <p>æ‰€ä»¥ \(y' = 3\cot(3x)\)ã€‚</p>
                        <p><strong>æ˜“é”™æé†’ï¼š</strong> å¾ˆå¤šäººä¼šå¿˜è®°æœ€å†…å±‚çš„å¯¼æ•° \(3\)ï¼Œå¯¼è‡´ç»“æœå°‘äº†ä¸€ä¸ªå› å­ã€‚è®°ä½ï¼šæ¯å±‚éƒ½è¦å¯¼ï¼</p>
                    </div>
                </div>
                
                <div class="error-tip">
                    <h4><i class="fas fa-exclamation-triangle"></i> æ˜“é”™ç‚¹æé†’ï¼šæ±‚å¯¼æ³•åˆ™çš„"ç¿»è½¦ç°åœº"</h4>
                    <p>1. <strong>ä¹˜ç§¯æ³•åˆ™ç¿»è½¦ï¼š</strong> \((uv)' = u'v'\) âŒ è¿™æ˜¯é”™çš„ï¼åº”è¯¥æ˜¯ \(u'v + uv'\) âœ…</p>
                    <p>2. <strong>é™¤æ³•æ³•åˆ™ç¿»è½¦ï¼š</strong> åˆ†å­è®°åé¡ºåºï¼Œæˆ–è€…å¿˜è®°åˆ†æ¯å¹³æ–¹</p>
                    <p>3. <strong>é“¾å¼æ³•åˆ™ç¿»è½¦ï¼š</strong> "å‰¥æ´‹è‘±"å‰¥åˆ°ä¸€åŠå°±åœäº†ï¼Œå¿˜è®°ä¹˜å†…å±‚å¯¼æ•°</p>
                    <p>4. <strong>æ··åˆè¿ç®—ç¿»è½¦ï¼š</strong> å…ˆä¹˜é™¤è¿˜æ˜¯å…ˆå¤åˆï¼Ÿè®°ä½ï¼šå…ˆè¯†åˆ«ç»“æ„ï¼Œå†é€‰æ‹©æ³•åˆ™ï¼</p>
                </div>
                
                <button class="btn" onclick="markAsMastered('section2')"><i class="fas fa-check-circle"></i> æ ‡è®°æœ¬èŠ‚ä¸ºå·²æŒæ¡</button>
            </section>
            
            <!-- ç¬¬ä¸‰èŠ‚ï¼šé«˜é˜¶å¯¼æ•° -->
            <section class="card" id="section3">
                <h2><i class="fas fa-sort-amount-up"></i> ç¬¬ä¸‰èŠ‚ï¼šé«˜é˜¶å¯¼æ•° - "å¯¼äº†åˆå¯¼"çš„å¥—å¨ƒæ¸¸æˆ</h2>
                
                <div class="definition">
                    <h3><i class="fas fa-book"></i> é«˜é˜¶å¯¼æ•°ï¼šå¯¼æ•°çš„å¯¼æ•°æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
                    <p>å‡½æ•° \(y = f(x)\) çš„å¯¼æ•° \(y' = f'(x)\) ä»ç„¶æ˜¯ \(x\) çš„å‡½æ•°ï¼Œå¦‚æœå®ƒè¿˜å¯å¯¼ï¼Œåˆ™ç§°å…¶å¯¼æ•°ä¸º \(f(x)\) çš„<strong>äºŒé˜¶å¯¼æ•°</strong>ï¼Œè®°ä½œï¼š</p>
                    <div class="formula">
                        <p>\[y'' = f''(x) = \frac{d^2y}{dx^2} = \frac{d}{dx}\left(\frac{dy}{dx}\right)\]</p>
                    </div>
                    <p>ç±»ä¼¼åœ°ï¼Œå¯ä»¥å®šä¹‰ä¸‰é˜¶ã€å››é˜¶ä¹ƒè‡³ \(n\) é˜¶å¯¼æ•°ã€‚ä¸‰é˜¶å¯¼æ•°ï¼š\(y''' = f'''(x) = \frac{d^3y}{dx^3}\)</p>
                    <p>\(n\) é˜¶å¯¼æ•°ï¼š\(y^{(n)} = f^{(n)}(x) = \frac{d^ny}{dx^n}\)</p>
                    
                    <div class="analogy">
                        <p><strong>æ¯”å–»æ—¶åˆ»ï¼š</strong> æŠŠå‡½æ•°æƒ³è±¡æˆä¸€è¾†è½¦ï¼š</p>
                        <p>â€¢ ä¸€é˜¶å¯¼æ•°ï¼šé€Ÿåº¦ï¼ˆä½ç½®çš„å˜åŒ–ç‡ï¼‰</p>
                        <p>â€¢ äºŒé˜¶å¯¼æ•°ï¼šåŠ é€Ÿåº¦ï¼ˆé€Ÿåº¦çš„å˜åŒ–ç‡ï¼‰</p>
                        <p>â€¢ ä¸‰é˜¶å¯¼æ•°ï¼šåŠ åŠ é€Ÿåº¦ï¼ˆåŠ é€Ÿåº¦çš„å˜åŒ–ç‡ï¼Œä¹Ÿå«æ€¥åŠ¨åº¦ï¼‰</p>
                        <p>â€¢ å››é˜¶å¯¼æ•°ï¼šåŠ åŠ åŠ é€Ÿåº¦...ï¼ˆå¥½äº†ï¼Œå†å¯¼ä¸‹å»è½¦è¦æ•£æ¶äº†ï¼‰</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h3><i class="fas fa-gavel"></i> å¸¸è§å‡½æ•°çš„é«˜é˜¶å¯¼æ•°å…¬å¼ï¼šæ•°å­¦çš„"å¾ªç¯èŠ‚"</h3>
                    <div class="formula">
                        <p>1. \((e^x)^{(n)} = e^x\) <span style="color:#666; font-style:italic;">ï¼ˆe^xï¼šå¯¼äº†ç­‰äºæ²¡å¯¼ï¼Œæ•°å­¦ç•Œçš„"æ°¸åŠ¨æœº"ï¼‰</span></p>
                        <p>2. \((\sin x)^{(n)} = \sin\left(x + \frac{n\pi}{2}\right)\) <span style="color:#666; font-style:italic;">ï¼ˆæ­£å¼¦å‡½æ•°ï¼šæ¯å¯¼ä¸€æ¬¡ï¼Œç›¸ä½åŠ Ï€/2ï¼‰</span></p>
                        <p>3. \((\cos x)^{(n)} = \cos\left(x + \frac{n\pi}{2}\right)\) <span style="color:#666; font-style:italic;">ï¼ˆä½™å¼¦å‡½æ•°ï¼šåŒä¸Šï¼‰</span></p>
                        <p>4. \((x^m)^{(n)} = m(m-1)\cdots(m-n+1)x^{m-n} \quad (n \leq m)\)</p>
                        <p>5. \((\ln(1+x))^{(n)} = (-1)^{n-1}\frac{(n-1)!}{(1+x)^n} \quad (x > -1)\)</p>
                    </div>
                    
                    <div class="self-review">
                        æ›¾ç»æˆ‘ä»¥ä¸ºé«˜é˜¶å¯¼æ•°å°±æ˜¯ä¸€ç›´æ±‚å¯¼å‘—ï¼Œç›´åˆ°çœ‹åˆ° \((\sin x)^{(100)}\) è¿™æ ·çš„é¢˜ç›®... 100é˜¶ï¼Ÿï¼éš¾é“è¦å¯¼100æ¬¡ï¼Ÿåæ¥å‘ç°åªéœ€è¦æ‰¾è§„å¾‹ï¼šæ¯4æ¬¡ä¸€ä¸ªå¾ªç¯ï¼æ•°å­¦æœç„¶æ˜¯é—¨æ‰¾è§„å¾‹çš„å­¦ç§‘ï¼Œæ‰¾åˆ°äº†è§„å¾‹ï¼Œä½ å°±æ‰¾åˆ°äº†å·æ‡’çš„æ–¹æ³•ã€‚
                    </div>
                </div>
                
                <div class="graph-container">
                    <div class="canvas-container">
                        <canvas id="higher-order-graph"></canvas>
                    </div>
                </div>
                
                <div class="graph-controls">
                    <span>å‡½æ•°é€‰æ‹©ï¼š</span>
                    <select id="higher-order-function">
                        <option value="sin(x)">f(x) = sin(x)</option>
                        <option value="e^x">f(x) = e^x</option>
                        <option value="x^3">f(x) = xÂ³</option>
                        <option value="cos(x)">f(x) = cos(x)</option>
                    </select>
                    <div>
                        <label>å¯¼æ•°é˜¶æ•°ï¼š</label>
                        <input type="range" id="order-slider" min="0" max="4" step="1" value="0" style="width: 150px;">
                        <span id="order-text">åŸå‡½æ•° (0é˜¶)</span>
                    </div>
                    <button onclick="updateHigherOrderGraph()">æ›´æ–°å›¾å½¢</button>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 3.1ï¼šé«˜é˜¶å¯¼æ•°çš„"æ‰¾è§„å¾‹æ¸¸æˆ"</h3>
                    <p>æ±‚å‡½æ•° \(y = e^{2x}\) çš„ \(n\) é˜¶å¯¼æ•°ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer3-1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer3-1">
                        <p><strong>è§£ï¼š</strong> æ‰¾è§„å¾‹æ³•ï¼š</p>
                        <p>\[
                        \begin{aligned}
                        y &= e^{2x} \\
                        y' &= 2e^{2x} \\
                        y'' &= 2^2 e^{2x} = 4e^{2x} \\
                        y''' &= 2^3 e^{2x} = 8e^{2x} \\
                        y^{(4)} &= 2^4 e^{2x} = 16e^{2x} \\
                        &\vdots \\
                        y^{(n)} &= 2^n e^{2x}
                        \end{aligned}
                        \]</p>
                        <p>æ‰€ä»¥ \(y^{(n)} = 2^n e^{2x}\)ã€‚</p>
                        <p><strong>å½’çº³æ³•è¯æ˜ï¼š</strong></p>
                        <p>å½“ \(n=1\) æ—¶ï¼Œæ˜¾ç„¶æˆç«‹ã€‚</p>
                        <p>å‡è®¾ \(n=k\) æ—¶æˆç«‹ï¼Œå³ \(y^{(k)} = 2^k e^{2x}\)</p>
                        <p>åˆ™ \(y^{(k+1)} = \frac{d}{dx}(2^k e^{2x}) = 2^k \cdot 2e^{2x} = 2^{k+1} e^{2x}\)</p>
                        <p>ç”±æ•°å­¦å½’çº³æ³•ï¼Œå¯¹ä»»æ„æ­£æ•´æ•° \(n\)ï¼Œéƒ½æœ‰ \(y^{(n)} = 2^n e^{2x}\)ã€‚</p>
                    </div>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 3.2ï¼šä¸‰è§’å‡½æ•°é«˜é˜¶å¯¼æ•°çš„"å¾ªç¯èŠ‚"</h3>
                    <p>æ±‚å‡½æ•° \(y = \sin(3x)\) çš„ 10 é˜¶å¯¼æ•°ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer3-2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer3-2">
                        <p><strong>è§£ï¼š</strong> ä½¿ç”¨ä¸‰è§’å‡½æ•°é«˜é˜¶å¯¼æ•°å…¬å¼ï¼š</p>
                        <p>\[(\sin(ax))^{(n)} = a^n \sin\left(ax + \frac{n\pi}{2}\right)\]</p>
                        <p>è¿™é‡Œ \(a = 3\)ï¼Œ\(n = 10\)ï¼Œä»£å…¥å…¬å¼ï¼š</p>
                        <p>\[
                        \begin{aligned}
                        y^{(10)} &= 3^{10} \sin\left(3x + \frac{10\pi}{2}\right) \\
                        &= 3^{10} \sin\left(3x + 5\pi\right) \\
                        &= 3^{10} \sin\left(3x + \pi\right) \quad (\text{å› ä¸º } 5\pi = \pi + 4\pi, \text{æ­£å¼¦å‡½æ•°å‘¨æœŸæ˜¯ } 2\pi) \\
                        &= 3^{10} [-\sin(3x)] \\
                        &= -3^{10} \sin(3x)
                        \end{aligned}
                        \]</p>
                        <p>è®¡ç®— \(3^{10} = 59049\)ï¼Œæ‰€ä»¥ \(y^{(10)} = -59049 \sin(3x)\)ã€‚</p>
                        <p><strong>æŠ€å·§ï¼š</strong> åˆ©ç”¨å‘¨æœŸæ€§åŒ–ç®€è§’åº¦ï¼š\(\frac{10\pi}{2} = 5\pi = \pi + 2 \times 2\pi\)ï¼Œæ‰€ä»¥ç­‰ä»·äº \(\pi\)ã€‚</p>
                    </div>
                </div>
                
                <div class="error-tip">
                    <h4><i class="fas fa-exclamation-triangle"></i> æ˜“é”™ç‚¹æé†’ï¼šé«˜é˜¶å¯¼æ•°çš„"ä¸‰å¤§å‘"</h4>
                    <p>1. <strong>è®°å·å‘ï¼š</strong> \(f^{(n)}(x)\) æ˜¯ n é˜¶å¯¼æ•°ï¼Œ\(f^n(x)\) æ˜¯ n æ¬¡å¹‚ï¼Œä¸€å­—ä¹‹å·®ï¼Œå¤©å£¤ä¹‹åˆ«ï¼</p>
                    <p>2. <strong>å…¬å¼å‘ï¼š</strong> ä¸‰è§’å‡½æ•°é«˜é˜¶å¯¼æ•°å…¬å¼ä¸­çš„è§’åº¦å®¹æ˜“ç®—é”™ï¼Œç‰¹åˆ«æ˜¯é™¤ä»¥2åå¿˜è®°Ï€çš„å­˜åœ¨ã€‚</p>
                    <p>3. <strong>è§„å¾‹å‘ï¼š</strong> æ‰¾ä¸åˆ°è§„å¾‹å°±ç¡¬ç®—ï¼Œç»“æœç®—åˆ°3é˜¶å°±æ”¾å¼ƒäº†ã€‚è®°ä½ï¼šå…ˆç®—å‰3-4é˜¶ï¼Œæ‰¾è§„å¾‹ï¼</p>
                </div>
                
                <button class="btn" onclick="markAsMastered('section3')"><i class="fas fa-check-circle"></i> æ ‡è®°æœ¬èŠ‚ä¸ºå·²æŒæ¡</button>
            </section>
            
            <!-- ç¬¬å››èŠ‚ï¼šå¾®åˆ† -->
            <section class="card" id="section4">
                <h2><i class="fas fa-ruler-combined"></i> ç¬¬å››èŠ‚ï¼šå¾®åˆ† - å¯¼æ•°çš„"äº²å…„å¼Ÿ"</h2>
                
                <div class="definition">
                    <h3><i class="fas fa-book"></i> å¾®åˆ†å®šä¹‰ï¼šå¢é‡çš„"çº¿æ€§æ›¿èº«"</h3>
                    <p>å¦‚æœå‡½æ•° \(y = f(x)\) åœ¨ç‚¹ \(x_0\) å¤„çš„å¢é‡ \(\Delta y\) å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
                    <div class="formula">
                        <p>\[\Delta y = A\Delta x + o(\Delta x)\]</p>
                    </div>
                    <p>å…¶ä¸­ \(A\) æ˜¯ä¸ \(\Delta x\) æ— å…³çš„å¸¸æ•°ï¼Œ\(o(\Delta x)\) æ˜¯æ¯” \(\Delta x\) é«˜é˜¶çš„æ— ç©·å°ï¼Œåˆ™ç§°å‡½æ•°åœ¨ \(x_0\) å¤„<strong>å¯å¾®</strong>ï¼Œå¹¶ç§° \(A\Delta x\) ä¸ºå‡½æ•°åœ¨ \(x_0\) å¤„çš„å¾®åˆ†ï¼Œè®°ä½œï¼š</p>
                    <div class="formula">
                        <p>\[dy = A\Delta x = f'(x_0)dx\]</p>
                    </div>
                    <p>å…¶ä¸­ \(dx = \Delta x\)ã€‚</p>
                    
                    <div class="analogy">
                        <p><strong>æ¯”å–»æ—¶åˆ»ï¼š</strong> æŠŠå‡½æ•°æƒ³è±¡æˆä¸€æ¡å¼¯æ›²çš„è·¯ï¼Œå¾®åˆ†å°±æ˜¯ç”¨ç›´çº¿æ®µï¼ˆåˆ‡çº¿ï¼‰æ¥è¿‘ä¼¼æ›²çº¿æ®µï¼š</p>
                        <p>â€¢ \(\Delta y\)ï¼šå®é™…èµ°è¿‡çš„å¼¯æ›²è·¯ç¨‹ï¼ˆçœŸå®å¢é‡ï¼‰</p>
                        <p>â€¢ \(dy\)ï¼šä»¥ä¸ºèµ°çš„æ˜¯ç›´çº¿ï¼ˆå¾®åˆ†è¿‘ä¼¼ï¼‰</p>
                        <p>â€¢ \(o(\Delta x)\)ï¼šå¼¯æ›²éƒ¨åˆ†ä¸ç›´çº¿çš„è¯¯å·®</p>
                        <p>å½“è·¯ç¨‹å¾ˆçŸ­æ—¶ï¼ˆ\(\Delta x\) å¾ˆå°ï¼‰ï¼Œè¯¯å·®å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œè¿™å°±æ˜¯å¾®åˆ†çš„æ ¸å¿ƒæ€æƒ³ï¼</p>
                    </div>
                </div>
                
                <div class="theorem">
                    <h3><i class="fas fa-gavel"></i> å®šç†ï¼šå¯å¾®ä¸å¯å¯¼çš„"ç­‰ä»·å…³ç³»"</h3>
                    <p>å‡½æ•° \(y = f(x)\) åœ¨ç‚¹ \(x_0\) å¤„å¯å¾®çš„<strong>å……åˆ†å¿…è¦æ¡ä»¶</strong>æ˜¯å®ƒåœ¨ \(x_0\) å¤„å¯å¯¼ï¼Œä¸” \(dy = f'(x_0)dx\)ã€‚</p>
                    <p>å¯¹äºä¸€å…ƒå‡½æ•°ï¼š<strong>å¯å¾® â‡” å¯å¯¼</strong>ï¼ˆå°±åƒåŒèƒèƒï¼Œæœ‰ä½ æœ‰æˆ‘ï¼‰</p>
                    
                    <div class="fun-fact">
                        å¾®åˆ†ç¬¦å· \(d\) çš„ç”±æ¥ï¼šå¾·å›½æ•°å­¦å®¶è±å¸ƒå°¼èŒ¨å¼•å…¥ï¼Œæ¥è‡ªæ‹‰ä¸è¯­"differentia"ï¼Œæ„æ€æ˜¯"å·®å¼‚"ã€‚æ‰€ä»¥å¾®åˆ†å°±æ˜¯ç ”ç©¶"å·®å¼‚"çš„å­¦é—®ï¼Œç®€ç§°"æ‰¾ä¸åŒ"ã€‚
                    </div>
                </div>
                
                <div class="graph-container">
                    <div class="canvas-container">
                        <canvas id="differential-graph"></canvas>
                    </div>
                </div>
                
                <div class="graph-controls">
                    <span>å‡½æ•°é€‰æ‹©ï¼š</span>
                    <select id="diff-function-select">
                        <option value="x^2">f(x) = xÂ²</option>
                        <option value="sin(x)">f(x) = sin(x)</option>
                        <option value="e^x">f(x) = e^x</option>
                        <option value="sqrt(x)">f(x) = âˆšx</option>
                    </select>
                    <div>
                        <label>åŸºç‚¹ xâ‚€: <input type="range" id="diff-base-slider" min="-1" max="2" step="0.1" value="1" style="width: 100px;"></label>
                        <span id="diff-base-value">1.0</span>
                    </div>
                    <div>
                        <label>Î”x: <input type="range" id="diff-dx-slider" min="0.1" max="2" step="0.1" value="1" style="width: 100px;"></label>
                        <span id="diff-dx-value">1.0</span>
                    </div>
                    <button onclick="updateDifferentialGraph()">æ›´æ–°å›¾å½¢</button>
                </div>
                
                <div class="formula">
                    <h3><i class="fas fa-calculator"></i> å¾®åˆ†å…¬å¼ä¸ä¸€é˜¶å¾®åˆ†å½¢å¼ä¸å˜æ€§</h3>
                    <p>ä»å¯¼æ•°å…¬å¼å¯ä»¥ç›´æ¥å¾—åˆ°å¾®åˆ†å…¬å¼ï¼š</p>
                    <p>1. \(d(u \pm v) = du \pm dv\)</p>
                    <p>2. \(d(uv) = v du + u dv\)</p>
                    <p>3. \(d\left(\frac{u}{v}\right) = \frac{v du - u dv}{v^2} \quad (v \neq 0)\)</p>
                    <p>4. <strong>ä¸€é˜¶å¾®åˆ†å½¢å¼ä¸å˜æ€§ï¼š</strong> æ— è®º \(u\) æ˜¯è‡ªå˜é‡è¿˜æ˜¯ä¸­é—´å˜é‡ï¼Œéƒ½æœ‰ \(df(u) = f'(u) du\)</p>
                    
                    <div class="self-review">
                        æ›¾ç»æˆ‘è§‰å¾—å¾®åˆ†å…¬å¼å°±æ˜¯å¯¼æ•°å…¬å¼åŠ ä¸ª \(dx\)ï¼Œæ²¡å•¥æ„æ€ã€‚ç›´åˆ°é‡åˆ°ä¸€é˜¶å¾®åˆ†å½¢å¼ä¸å˜æ€§ï¼Œæ‰å‘ç°å¾®åˆ†çš„å¨åŠ›ï¼šæ— è®ºå‡½æ•°å¤šå¤æ‚ï¼Œå¾®åˆ†å½¢å¼éƒ½ä¸€æ ·ï¼è¿™å°±åƒæ•°å­¦ä¸­çš„"ä»¥ä¸å˜åº”ä¸‡å˜"ã€‚
                    </div>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 4.1ï¼šå¾®åˆ†çš„ç›´æ¥è®¡ç®—</h3>
                    <p>æ±‚å‡½æ•° \(y = \ln(1 + e^{x^2})\) çš„å¾®åˆ† \(dy\)ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer4-1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer4-1">
                        <p><strong>è§£ï¼š</strong> æ–¹æ³•ä¸€ï¼šå…ˆæ±‚å¯¼å†ä¹˜ä»¥ \(dx\)</p>
                        <p>\[
                        \begin{aligned}
                        y' &= \frac{1}{1+e^{x^2}} \cdot (e^{x^2})' \\
                        &= \frac{1}{1+e^{x^2}} \cdot e^{x^2} \cdot (x^2)' \\
                        &= \frac{1}{1+e^{x^2}} \cdot e^{x^2} \cdot 2x \\
                        &= \frac{2xe^{x^2}}{1+e^{x^2}}
                        \end{aligned}
                        \]</p>
                        <p>æ‰€ä»¥ \(dy = y'dx = \frac{2xe^{x^2}}{1+e^{x^2}} dx\)ã€‚</p>
                        
                        <p>æ–¹æ³•äºŒï¼šåˆ©ç”¨ä¸€é˜¶å¾®åˆ†å½¢å¼ä¸å˜æ€§ç›´æ¥æ±‚å¾®åˆ†ï¼š</p>
                        <p>\[
                        \begin{aligned}
                        dy &= d[\ln(1+e^{x^2})] \\
                        &= \frac{1}{1+e^{x^2}} d(1+e^{x^2}) \\
                        &= \frac{1}{1+e^{x^2}} \cdot e^{x^2} d(x^2) \\
                        &= \frac{1}{1+e^{x^2}} \cdot e^{x^2} \cdot 2x dx \\
                        &= \frac{2xe^{x^2}}{1+e^{x^2}} dx
                        \end{aligned}
                        \]</p>
                        <p>ä¸¤ç§æ–¹æ³•ç»“æœä¸€è‡´ï¼Œä½†æ–¹æ³•äºŒæ›´ç›´æ¥ï¼Œä½“ç°äº†å¾®åˆ†è¿ç®—çš„ç®€æ´æ€§ã€‚</p>
                    </div>
                </div>
                
                <div class="exercise">
                    <h3><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜ 4.2ï¼šå¾®åˆ†çš„è¿‘ä¼¼è®¡ç®—åº”ç”¨</h3>
                    <p>åˆ©ç”¨å¾®åˆ†è¿‘ä¼¼è®¡ç®— \(\sqrt[3]{8.02}\) çš„å€¼ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('answer4-2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="answer4-2">
                        <p><strong>è§£ï¼š</strong> è®¾ \(f(x) = \sqrt[3]{x} = x^{1/3}\)ï¼Œè¦è®¡ç®— \(f(8.02)\)</p>
                        <p>å– \(x_0 = 8\)ï¼Œ\(\Delta x = 0.02\)ï¼Œåˆ™ \(f(8) = \sqrt[3]{8} = 2\)</p>
                        <p>å…ˆæ±‚å¯¼æ•°ï¼š\(f'(x) = \frac{1}{3}x^{-2/3}\)ï¼Œæ‰€ä»¥ \(f'(8) = \frac{1}{3} \cdot 8^{-2/3} = \frac{1}{3} \cdot \frac{1}{4} = \frac{1}{12}\)</p>
                        <p>æ ¹æ®å¾®åˆ†è¿‘ä¼¼å…¬å¼ï¼š\(\Delta y \approx dy = f'(x_0) \Delta x\)</p>
                        <p>æ‰€ä»¥ \(f(8.02) \approx f(8) + f'(8) \cdot 0.02 = 2 + \frac{1}{12} \times 0.02 = 2 + \frac{0.02}{12} = 2 + 0.001666... \approx 2.00167\)</p>
                        <p><strong>éªŒè¯ï¼š</strong> å®é™…å€¼ \(\sqrt[3]{8.02} \approx 2.001665\)ï¼Œè¯¯å·®éå¸¸å°ï¼</p>
                        <p><strong>åº”ç”¨ï¼š</strong> è¿™ç§è¿‘ä¼¼è®¡ç®—åœ¨å·¥ç¨‹ã€ç‰©ç†ä¸­éå¸¸æœ‰ç”¨ï¼Œå½“è®¡ç®—å¤æ‚æˆ–æ— æ³•ç²¾ç¡®è®¡ç®—æ—¶ï¼Œå¾®åˆ†è¿‘ä¼¼èƒ½å¿«é€Ÿç»™å‡ºè¶³å¤Ÿç²¾ç¡®çš„ç»“æœã€‚</p>
                    </div>
                </div>
                
                <div class="error-tip">
                    <h4><i class="fas fa-exclamation-triangle"></i> æ˜“é”™ç‚¹æé†’ï¼šå¾®åˆ†çš„"å››å¤§è¯¯è§£"</h4>
                    <p>1. <strong>è¯¯è§£ä¸€ï¼š</strong> å¾®åˆ† \(dy\) å°±æ˜¯å¢é‡ \(\Delta y\) â†’ é”™ï¼\(dy\) åªæ˜¯ \(\Delta y\) çš„çº¿æ€§ä¸»éƒ¨ï¼Œä¸¤è€…æœ‰è¯¯å·®ã€‚</p>
                    <p>2. <strong>è¯¯è§£äºŒï¼š</strong> å¾®åˆ†å…¬å¼å¿˜è®°å†™ \(dx\) â†’ å¾®åˆ†å¿…é¡»æœ‰ \(dx\)ï¼Œå°±åƒå¯¼æ•°å¿…é¡»æœ‰è‡ªå˜é‡ä¸€æ ·ã€‚</p>
                    <p>3. <strong>è¯¯è§£ä¸‰ï¼š</strong> å¯å¾®ä¸å¯å¯¼çš„åŒºåˆ« â†’ å¯¹äºä¸€å…ƒå‡½æ•°ï¼Œä¸¤è€…ç­‰ä»·ï¼›å¯¹äºå¤šå…ƒå‡½æ•°ï¼Œå¯å¾®è¦æ±‚æ›´é«˜ã€‚</p>
                    <p>4. <strong>è¯¯è§£å››ï¼š</strong> å¾®åˆ†è¿‘ä¼¼è®¡ç®—æ—¶ï¼Œ\(\Delta x\) å–å¾—å¤ªå¤§ â†’ \(\Delta x\) è¶Šå°ï¼Œè¿‘ä¼¼è¶Šç²¾ç¡®ï¼</p>
                </div>
                
                <button class="btn" onclick="markAsMastered('section4')"><i class="fas fa-check-circle"></i> æ ‡è®°æœ¬èŠ‚ä¸ºå·²æŒæ¡</button>
            </section>
        </main>
        
        <aside class="sidebar">
            <h2><i class="fas fa-list"></i> ç« èŠ‚å¯¼èˆª</h2>
            <ul class="chapter-nav">
                <li><a href="#section1" class="active"><i class="fas fa-calculator"></i> ç¬¬ä¸€èŠ‚ï¼šå¯¼æ•°æ¦‚å¿µ</a></li>
                <li><a href="#section2"><i class="fas fa-project-diagram"></i> ç¬¬äºŒèŠ‚ï¼šæ±‚å¯¼æ³•åˆ™</a></li>
                <li><a href="#section3"><i class="fas fa-sort-amount-up"></i> ç¬¬ä¸‰èŠ‚ï¼šé«˜é˜¶å¯¼æ•°</a></li>
                <li><a href="#section4"><i class="fas fa-ruler-combined"></i> ç¬¬å››èŠ‚ï¼šå¾®åˆ†</a></li>
            </ul>
            
            <h2 style="margin-top: 40px;"><i class="fas fa-lightbulb"></i> æœ¬ç« æ ¸å¿ƒæ€æƒ³</h2>
            <div class="definition" style="margin-top: 15px;">
                <p><strong>å¯¼æ•°</strong>ï¼šå˜åŒ–ç‡ï¼Œåˆ‡çº¿çš„æ–œç‡ï¼Œç¬æ—¶é€Ÿåº¦</p>
                <p><strong>å¾®åˆ†</strong>ï¼šå¢é‡çš„çº¿æ€§ä¸»éƒ¨ï¼Œå±€éƒ¨çº¿æ€§é€¼è¿‘</p>
                <p><strong>å…³ç³»</strong>ï¼šå¯å¯¼ â‡” å¯å¾®ï¼ˆä¸€å…ƒå‡½æ•°ï¼‰</p>
                <p><strong>é«˜é˜¶å¯¼æ•°</strong>ï¼šå¯¼æ•°çš„å¯¼æ•°ï¼Œå˜åŒ–ç‡çš„å˜åŒ–ç‡...</p>
            </div>
            
            <h2 style="margin-top: 40px;"><i class="fas fa-brain"></i> è®°å¿†å£è¯€å¤§é›†åˆ</h2>
            <div class="self-review" style="margin-top: 15px;">
                <p>"å¯¼æ•°ä¸ºé›¶é©»ç‚¹å¯»ï¼Œå¯èƒ½æå€¼è—å…¶ä¸­"</p>
                <p>"å‰å¯¼åä¸å¯¼ï¼Œåå¯¼å‰ä¸å¯¼ï¼Œä¹˜ç§¯æ³•åˆ™è¦è®°ç‰¢"</p>
                <p>"ä¸Šå¯¼ä¸‹ä¸å¯¼ï¼Œå‡ä¸‹å¯¼ä¸Šä¸å¯¼ï¼Œåˆ†æ¯å¹³æ–¹ä¸èƒ½å°‘"</p>
                <p>"é“¾å¼æ³•åˆ™å‰¥æ´‹è‘±ï¼Œä¸€å±‚ä¸€å±‚å¾€é‡Œæ”»"</p>
                <p>"å¯å¯¼ä¸€å®šè¿ç»­ï¼Œè¿ç»­æœªå¿…å¯å¯¼"</p>
            </div>
            
            <h2 style="margin-top: 40px;"><i class="fas fa-check-circle"></i> æŒæ¡ç¨‹åº¦æ£€æµ‹</h2>
            <div class="exercise" style="margin-top: 15px;">
                <p id="mastered-list">å°šæœªæŒæ¡ä»»ä½•çŸ¥è¯†ç‚¹</p>
                <p>å·²æŒæ¡: <span id="mastered-display">0</span>/12 ä¸ªçŸ¥è¯†ç‚¹</p>
                <button class="btn" onclick="checkAllKnowledge()" style="width:100%; margin-top:15px;">å…¨é¢æ£€æµ‹æŒæ¡ç¨‹åº¦</button>
                <button class="btn" onclick="resetProgress()" style="width:100%; margin-top:10px; background: #666;">é‡ç½®å­¦ä¹ è¿›åº¦</button>
            </div>
            
            <h2 style="margin-top: 40px;"><i class="fas fa-gamepad"></i> å¯¼æ•°å°æ¸¸æˆ</h2>
            <div class="exercise" style="margin-top: 15px;">
                <p>å¿«é€Ÿåˆ¤æ–­å¯¹é”™ï¼š</p>
                <p>1. å¯å¯¼ä¸€å®šè¿ç»­ ( )</p>
                <p>2. è¿ç»­ä¸€å®šå¯å¯¼ ( )</p>
                <p>3. (sin x)' = cos x ( )</p>
                <p>4. (e^x)' = e^x ( )</p>
                <p>5. å¾®åˆ†å°±æ˜¯å¯¼æ•° ( )</p>
                <button class="show-answer" onclick="showGameAnswers()" style="width:100%;">æŸ¥çœ‹ç­”æ¡ˆ</button>
                <div id="game-answers" class="answer"></div>
            </div>
        </aside>
    </div>
    
    <footer>
        <p>Â© 2023 é«˜ç­‰æ•°å­¦å­¦ä¹ åŠ©æ‰‹ | åŒæµå¤§å­¦ç¬¬ä¸ƒç‰ˆ/ç¬¬å…«ç‰ˆä¸Šå†Œç¬¬äºŒç« ï¼šå¯¼æ•°ä¸å¾®åˆ†</p>
        <p>æ³¨ï¼šæœ¬å†…å®¹ä»¥å¹½é»˜é£è¶£ã€çŸ¥è¯†ç‚¹è‡ªæˆ‘æ£€è®¨çš„æ–¹å¼ç¼–å†™ï¼Œæ—¨åœ¨å¸®åŠ©å¤§å­¦ç”Ÿè½»æ¾ç†è§£é«˜ç­‰æ•°å­¦æ¦‚å¿µ</p>
        <p style="margin-top: 15px; font-size: 0.8rem; color: #888;">"æ•°å­¦ä¸ä¼šæ¬ºéª—ä½ ï¼Œå› ä¸ºæ•°å­¦æ ¹æœ¬ä¸åœ¨ä¹ä½ æ‡‚ä¸æ‡‚" â€” æ”¹ç¼–è‡ªæŸæ•°å­¦å®¶åè¨€</p>
    </footer>

    <script>
        // åˆå§‹åŒ–æŒæ¡çŠ¶æ€
        let masteredSections = new Set();
        
        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            const sections = document.querySelectorAll('.card');
            const currentSection = document.querySelector('.card:target') || sections[0];
            const sectionIndex = Array.from(sections).indexOf(currentSection);
            const progress = ((sectionIndex + 1) / sections.length) * 100;
            
            document.getElementById('progress').style.width = progress + '%';
            document.getElementById('progress-text').textContent = Math.round(progress) + '%';
            
            // æ›´æ–°å¯¼èˆªæ´»åŠ¨çŠ¶æ€
            document.querySelectorAll('.chapter-nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`.chapter-nav a[href="#${currentSection.id}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
            
            // æ›´æ–°æŒæ¡æ•°é‡
            updateMasteredCount();
        }
        
        // åˆå§‹åŒ–è¿›åº¦æ¡
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            initDerivativeGraph();
            initChainRuleGraph();
            initHigherOrderGraph();
            initDifferentialGraph();
            updateChainRuleDemo();
        });
        
        // ç›‘å¬hashå˜åŒ–ï¼ˆé”šç‚¹é“¾æ¥ï¼‰
        window.addEventListener('hashchange', updateProgress);
        
        // æ˜¾ç¤º/éšè—ç­”æ¡ˆ
        function toggleAnswer(answerId) {
            const answer = document.getElementById(answerId);
            answer.classList.toggle('show');
            const button = event.target;
            button.textContent = answer.classList.contains('show') ? 'éšè—ç­”æ¡ˆ' : 'æ˜¾ç¤ºç­”æ¡ˆ';
        }
        
        // æ ‡è®°ä¸ºå·²æŒæ¡
        function markAsMastered(sectionId) {
            masteredSections.add(sectionId);
            updateMasteredCount();
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            const button = event.target;
            button.innerHTML = '<i class="fas fa-check-double"></i> å·²æŒæ¡';
            button.style.background = '#4CAF50';
            button.onclick = null;
            
            // æ˜¾ç¤ºæç¤º
            alert('å¤ªæ£’äº†ï¼ä½ å·²ç»æŒæ¡äº†è¿™ä¸€èŠ‚çš„å†…å®¹ï¼\n\nè®°ä½ï¼šç†è§£æ¯”æ­»è®°ç¡¬èƒŒæ›´é‡è¦ï¼Œåº”ç”¨æ¯”ç†è§£æ›´é«˜çº§ï¼');
        }
        
        // æ›´æ–°æŒæ¡æ•°é‡æ˜¾ç¤º
        function updateMasteredCount() {
            const totalSections = 4; // 4èŠ‚
            const mastered = masteredSections.size;
            document.getElementById('mastered-count').textContent = mastered * 3; // æ¯èŠ‚å¤§çº¦3ä¸ªçŸ¥è¯†ç‚¹
            document.getElementById('mastered-display').textContent = mastered * 3;
            
            // æ›´æ–°æŒæ¡åˆ—è¡¨
            const masteredList = document.getElementById('mastered-list');
            if (mastered === 0) {
                masteredList.textContent = 'å°šæœªæŒæ¡ä»»ä½•çŸ¥è¯†ç‚¹';
                masteredList.style.color = '#666';
            } else {
                let listText = 'å·²æŒæ¡: ';
                if (masteredSections.has('section1')) listText += 'å¯¼æ•°æ¦‚å¿µã€';
                if (masteredSections.has('section2')) listText += 'æ±‚å¯¼æ³•åˆ™ã€';
                if (masteredSections.has('section3')) listText += 'é«˜é˜¶å¯¼æ•°ã€';
                if (masteredSections.has('section4')) listText += 'å¾®åˆ†ã€';
                masteredList.textContent = listText.slice(0, -1); // å»æ‰æœ€åçš„é€—å·
                masteredList.style.color = '#4CAF50';
            }
        }
        
        // å…¨é¢æ£€æµ‹
        function checkAllKnowledge() {
            const questions = [
                "1. å¯¼æ•°çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆç¬æ—¶å˜åŒ–ç‡/åˆ‡çº¿æ–œç‡ï¼‰",
                "2. å¯å¯¼å’Œè¿ç»­çš„å…³ç³»ï¼Ÿï¼ˆå¯å¯¼â‡’è¿ç»­ï¼Œè¿ç»­â‡å¯å¯¼ï¼‰",
                "3. ä¹˜ç§¯æ³•åˆ™å…¬å¼ï¼Ÿï¼ˆ(uv)' = u'v + uv'ï¼‰",
                "4. é“¾å¼æ³•åˆ™å£è¯€ï¼Ÿï¼ˆå¤–å¯¼å†…ä¸å¯¼ï¼Œä¹˜ä»¥å†…å¯¼ï¼‰",
                "5. é«˜é˜¶å¯¼æ•°çš„æ„ä¹‰ï¼Ÿï¼ˆå˜åŒ–ç‡çš„å˜åŒ–ç‡...ï¼‰",
                "6. å¾®åˆ†çš„å®šä¹‰ï¼Ÿï¼ˆå¢é‡çš„çº¿æ€§ä¸»éƒ¨ï¼‰",
                "7. å¯å¾®ä¸å¯å¯¼çš„å…³ç³»ï¼Ÿï¼ˆä¸€å…ƒå‡½æ•°ä¸­ç­‰ä»·ï¼‰",
                "8. ä¸€é˜¶å¾®åˆ†å½¢å¼ä¸å˜æ€§ï¼Ÿï¼ˆdf(u) = f'(u)duï¼‰"
            ];
            
            let message = "æœ¬ç« æ ¸å¿ƒçŸ¥è¯†ç‚¹æ£€æµ‹ï¼š\n\n";
            questions.forEach((q, i) => {
                message += q + "\n\n";
            });
            
            message += `ä½ çš„æŒæ¡æƒ…å†µï¼š${masteredSections.size * 3}/12 ä¸ªçŸ¥è¯†ç‚¹\n`;
            if (masteredSections.size >= 3) {
                message += "ä¼˜ç§€ï¼ç»§ç»­ä¿æŒï¼";
            } else if (masteredSections.size >= 2) {
                message += "ä¸é”™ï¼Œä½†è¿˜æœ‰æå‡ç©ºé—´ï¼";
            } else {
                message += "åŠ æ²¹ï¼Œè¿˜éœ€è¦å¤šå¤ä¹ ï¼";
            }
            
            alert(message);
        }
        
        // é‡ç½®è¿›åº¦
        function resetProgress() {
            if (confirm('ç¡®å®šè¦é‡ç½®å­¦ä¹ è¿›åº¦å—ï¼Ÿ')) {
                masteredSections.clear();
                updateMasteredCount();
                
                // é‡ç½®æ‰€æœ‰æ ‡è®°æŒ‰é’®
                document.querySelectorAll('.btn').forEach(btn => {
                    if (btn.textContent.includes('å·²æŒæ¡')) {
                        btn.innerHTML = '<i class="fas fa-check-circle"></i> æ ‡è®°æœ¬èŠ‚ä¸ºå·²æŒæ¡';
                        btn.style.background = '';
                        btn.onclick = function() {
                            const sectionId = btn.closest('.card').id;
                            markAsMastered(sectionId);
                        };
                    }
                });
                
                alert('å­¦ä¹ è¿›åº¦å·²é‡ç½®ï¼é‡æ–°å¼€å§‹å­¦ä¹ å§ï¼');
            }
        }
        
        // å°æ¸¸æˆç­”æ¡ˆ
        function showGameAnswers() {
            const answers = [
                "1. å¯å¯¼ä¸€å®šè¿ç»­ (âœ“)",
                "2. è¿ç»­ä¸€å®šå¯å¯¼ (âœ—) åä¾‹ï¼š|x|åœ¨x=0å¤„",
                "3. (sin x)' = cos x (âœ“)",
                "4. (e^x)' = e^x (âœ“)",
                "5. å¾®åˆ†å°±æ˜¯å¯¼æ•° (âœ—) å¾®åˆ†=å¯¼æ•°Ã—dx"
            ];
            
            const container = document.getElementById('game-answers');
            container.innerHTML = answers.join('<br>');
            container.classList.add('show');
        }
        
        // å¯¼æ•°å›¾å½¢åˆå§‹åŒ–
        let derivativeChart = null;
        
        function initDerivativeGraph() {
            const ctx = document.getElementById('derivative-graph').getContext('2d');
            const tangentSlider = document.getElementById('tangent-slider');
            const tangentValue = document.getElementById('tangent-value');
            
            tangentSlider.addEventListener('input', function() {
                tangentValue.textContent = parseFloat(this.value).toFixed(1);
                updateDerivativeGraph();
            });
            
            updateDerivativeGraph();
        }
        
        function updateDerivativeGraph() {
            const functionType = document.getElementById('function-select').value;
            const tangentX = parseFloat(document.getElementById('tangent-slider').value);
            
            let func, derivative, funcName;
            
            switch(functionType) {
                case 'x^2':
                    func = x => x * x;
                    derivative = x => 2 * x;
                    funcName = 'f(x) = xÂ²';
                    break;
                case 'sin(x)':
                    func = x => Math.sin(x);
                    derivative = x => Math.cos(x);
                    funcName = 'f(x) = sin(x)';
                    break;
                case 'abs(x)':
                    func = x => Math.abs(x);
                    derivative = x => x > 0 ? 1 : (x < 0 ? -1 : NaN);
                    funcName = 'f(x) = |x|';
                    break;
                case 'x^3':
                    func = x => x * x * x;
                    derivative = x => 3 * x * x;
                    funcName = 'f(x) = xÂ³';
                    break;
            }
            
            // ç”Ÿæˆæ•°æ®
            const labels = [];
            const data = [];
            const tangentData = [];
            
            for (let x = -2; x <= 2; x += 0.1) {
                labels.push(x.toFixed(1));
                data.push(func(x));
                
                // åˆ‡çº¿æ•°æ®
                if (Math.abs(x - tangentX) < 0.15) {
                    const tangentY = func(tangentX) + derivative(tangentX) * (x - tangentX);
                    tangentData.push({
                        x: x,
                        y: tangentY
                    });
                }
            }
            
            // åˆ›å»ºæˆ–æ›´æ–°å›¾è¡¨
            const ctx = document.getElementById('derivative-graph').getContext('2d');
            
            if (derivativeChart) {
                derivativeChart.destroy();
            }
            
            derivativeChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: funcName,
                        data: data,
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1
                    }, {
                        label: `åˆ‡çº¿ (x=${tangentX.toFixed(1)})`,
                        data: tangentData.map(point => point.y),
                        borderColor: '#f72585',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'f(x)'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    label += context.parsed.y.toFixed(2);
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // é“¾å¼æ³•åˆ™å›¾å½¢åˆå§‹åŒ–
        let chainRuleChart = null;
        
        function initChainRuleGraph() {
            const stepSlider = document.getElementById('chain-step-slider');
            const stepText = document.getElementById('chain-step-text');
            
            stepSlider.addEventListener('input', function() {
                const steps = ['åŸå§‹å‡½æ•°', 'ç¬¬ä¸€å±‚', 'ç¬¬äºŒå±‚', 'æœ€ç»ˆå¯¼æ•°'];
                stepText.textContent = steps[this.value];
                updateChainRuleGraph();
            });
            
            updateChainRuleGraph();
        }
        
        function updateChainRuleGraph() {
            const functionType = document.getElementById('chain-function-select').value;
            const step = parseInt(document.getElementById('chain-step-slider').value);
            
            let func, derivative, steps, funcName;
            
            switch(functionType) {
                case 'sin(2x)':
                    func = x => Math.sin(2*x);
                    derivative = x => 2 * Math.cos(2*x);
                    steps = [
                        'y = sin(2x)',
                        'å¤–å±‚: sin(u), å†…å±‚: u=2x',
                        'å¤–å±‚å¯¼: cos(u), å†…å±‚å¯¼: 2',
                        'y\' = 2cos(2x)'
                    ];
                    funcName = 'sin(2x)';
                    break;
                case 'e^(x^2)':
                    func = x => Math.exp(x*x);
                    derivative = x => 2*x * Math.exp(x*x);
                    steps = [
                        'y = e^(xÂ²)',
                        'å¤–å±‚: e^u, å†…å±‚: u=xÂ²',
                        'å¤–å±‚å¯¼: e^u, å†…å±‚å¯¼: 2x',
                        'y\' = 2xe^(xÂ²)'
                    ];
                    funcName = 'e^(xÂ²)';
                    break;
                case 'sqrt(1+x^2)':
                    func = x => Math.sqrt(1 + x*x);
                    derivative = x => x / Math.sqrt(1 + x*x);
                    steps = [
                        'y = âˆš(1+xÂ²)',
                        'å¤–å±‚: âˆšu, å†…å±‚: u=1+xÂ²',
                        'å¤–å±‚å¯¼: 1/(2âˆšu), å†…å±‚å¯¼: 2x',
                        'y\' = x/âˆš(1+xÂ²)'
                    ];
                    funcName = 'âˆš(1+xÂ²)';
                    break;
                case 'ln(cos(x))':
                    func = x => Math.log(Math.cos(x));
                    derivative = x => -Math.tan(x);
                    steps = [
                        'y = ln(cos(x))',
                        'å¤–å±‚: ln(u), ä¸­é—´: u=cos(v), å†…å±‚: v=x',
                        'å¤–å±‚å¯¼: 1/u, ä¸­é—´å¯¼: -sin(v), å†…å±‚å¯¼: 1',
                        'y\' = -tan(x)'
                    ];
                    funcName = 'ln(cos(x))';
                    break;
            }
            
            // ç”Ÿæˆæ•°æ®
            const labels = [];
            const data = [];
            
            let xMin = -2, xMax = 2;
            if (functionType === 'ln(cos(x))') {
                xMin = -1.5;
                xMax = 1.5; // é¿å…cos(x)<=0
            }
            
            for (let x = xMin; x <= xMax; x += 0.1) {
                labels.push(x.toFixed(1));
                data.push(func(x));
            }
            
            // åˆ›å»ºæˆ–æ›´æ–°å›¾è¡¨
            const ctx = document.getElementById('chain-rule-graph').getContext('2d');
            
            if (chainRuleChart) {
                chainRuleChart.destroy();
            }
            
            chainRuleChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: funcName,
                        data: data,
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'f(x)'
                            }
                        }
                    },
                    plugins: {
                        subtitle: {
                            display: true,
                            text: steps[step],
                            font: {
                                size: 14
                            },
                            padding: {
                                bottom: 10
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${funcName}: ${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // é«˜é˜¶å¯¼æ•°å›¾å½¢åˆå§‹åŒ–
        let higherOrderChart = null;
        
        function initHigherOrderGraph() {
            const orderSlider = document.getElementById('order-slider');
            const orderText = document.getElementById('order-text');
            
            orderSlider.addEventListener('input', function() {
                const order = parseInt(this.value);
                const orders = ['åŸå‡½æ•° (0é˜¶)', 'ä¸€é˜¶å¯¼æ•°', 'äºŒé˜¶å¯¼æ•°', 'ä¸‰é˜¶å¯¼æ•°', 'å››é˜¶å¯¼æ•°'];
                orderText.textContent = orders[order];
                updateHigherOrderGraph();
            });
            
            updateHigherOrderGraph();
        }
        
        function updateHigherOrderGraph() {
            const functionType = document.getElementById('higher-order-function').value;
            const order = parseInt(document.getElementById('order-slider').value);
            
            let funcs = [], labels = [];
            
            switch(functionType) {
                case 'sin(x)':
                    funcs = [
                        x => Math.sin(x),
                        x => Math.cos(x),
                        x => -Math.sin(x),
                        x => -Math.cos(x),
                        x => Math.sin(x)
                    ];
                    labels = ['sin(x)', 'cos(x)', '-sin(x)', '-cos(x)', 'sin(x)'];
                    break;
                case 'e^x':
                    funcs = [
                        x => Math.exp(x),
                        x => Math.exp(x),
                        x => Math.exp(x),
                        x => Math.exp(x),
                        x => Math.exp(x)
                    ];
                    labels = ['e^x', 'e^x', 'e^x', 'e^x', 'e^x'];
                    break;
                case 'x^3':
                    funcs = [
                        x => x*x*x,
                        x => 3*x*x,
                        x => 6*x,
                        x => 6,
                        x => 0
                    ];
                    labels = ['xÂ³', '3xÂ²', '6x', '6', '0'];
                    break;
                case 'cos(x)':
                    funcs = [
                        x => Math.cos(x),
                        x => -Math.sin(x),
                        x => -Math.cos(x),
                        x => Math.sin(x),
                        x => Math.cos(x)
                    ];
                    labels = ['cos(x)', '-sin(x)', '-cos(x)', 'sin(x)', 'cos(x)'];
                    break;
            }
            
            // ç”Ÿæˆæ•°æ®
            const xLabels = [];
            const data = [];
            
            for (let x = -2; x <= 2; x += 0.1) {
                xLabels.push(x.toFixed(1));
                data.push(funcs[order](x));
            }
            
            // åˆ›å»ºæˆ–æ›´æ–°å›¾è¡¨
            const ctx = document.getElementById('higher-order-graph').getContext('2d');
            
            if (higherOrderChart) {
                higherOrderChart.destroy();
            }
            
            higherOrderChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xLabels,
                    datasets: [{
                        label: labels[order],
                        data: data,
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'y'
                            }
                        }
                    },
                    plugins: {
                        subtitle: {
                            display: true,
                            text: `${order}é˜¶å¯¼æ•°: ${labels[order]}`,
                            font: {
                                size: 14
                            },
                            padding: {
                                bottom: 10
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${labels[order]}: ${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // å¾®åˆ†å›¾å½¢åˆå§‹åŒ–
        let differentialChart = null;
        
        function initDifferentialGraph() {
            const baseSlider = document.getElementById('diff-base-slider');
            const baseValue = document.getElementById('diff-base-value');
            const dxSlider = document.getElementById('diff-dx-slider');
            const dxValue = document.getElementById('diff-dx-value');
            
            baseSlider.addEventListener('input', function() {
                baseValue.textContent = parseFloat(this.value).toFixed(1);
                updateDifferentialGraph();
            });
            
            dxSlider.addEventListener('input', function() {
                dxValue.textContent = parseFloat(this.value).toFixed(1);
                updateDifferentialGraph();
            });
            
            updateDifferentialGraph();
        }
        
        function updateDifferentialGraph() {
            const functionType = document.getElementById('diff-function-select').value;
            const x0 = parseFloat(document.getElementById('diff-base-slider').value);
            const dx = parseFloat(document.getElementById('diff-dx-slider').value);
            const x1 = x0 + dx;
            
            let func, derivative, funcName;
            
            switch(functionType) {
                case 'x^2':
                    func = x => x * x;
                    derivative = x => 2 * x;
                    funcName = 'f(x) = xÂ²';
                    break;
                case 'sin(x)':
                    func = x => Math.sin(x);
                    derivative = x => Math.cos(x);
                    funcName = 'f(x) = sin(x)';
                    break;
                case 'e^x':
                    func = x => Math.exp(x);
                    derivative = x => Math.exp(x);
                    funcName = 'f(x) = e^x';
                    break;
                case 'sqrt(x)':
                    func = x => Math.sqrt(x);
                    derivative = x => 1/(2*Math.sqrt(x));
                    funcName = 'f(x) = âˆšx';
                    break;
            }
            
            // è®¡ç®—å€¼
            const y0 = func(x0);
            const y1 = func(x1);
            const dy = derivative(x0) * dx;
            const deltaY = y1 - y0;
            
            // ç”Ÿæˆæ•°æ®
            const labels = [];
            const funcData = [];
            const tangentData = [];
            
            let xMin = Math.min(x0, x1) - 0.5;
            let xMax = Math.max(x0, x1) + 0.5;
            
            if (functionType === 'sqrt(x)') {
                xMin = Math.max(0, xMin); // âˆšxå®šä¹‰åŸŸä¸ºxâ‰¥0
            }
            
            for (let x = xMin; x <= xMax; x += 0.1) {
                labels.push(x.toFixed(1));
                funcData.push(func(x));
                
                // åˆ‡çº¿æ•°æ®
                const tangentY = y0 + derivative(x0) * (x - x0);
                tangentData.push(tangentY);
            }
            
            // åˆ›å»ºæˆ–æ›´æ–°å›¾è¡¨
            const ctx = document.getElementById('differential-graph').getContext('2d');
            
            if (differentialChart) {
                differentialChart.destroy();
            }
            
            differentialChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: funcName,
                        data: funcData,
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.1
                    }, {
                        label: 'åˆ‡çº¿ (è¿‘ä¼¼çº¿æ€§)',
                        data: tangentData,
                        borderColor: '#f72585',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0
                    }, {
                        label: `Î”y = ${deltaY.toFixed(3)}`,
                        data: Array(labels.length).fill(null),
                        backgroundColor: 'rgba(76, 201, 240, 0.5)',
                        borderColor: 'rgba(76, 201, 240, 0.5)',
                        borderWidth: 0,
                        pointRadius: 0
                    }, {
                        label: `dy = ${dy.toFixed(3)}`,
                        data: Array(labels.length).fill(null),
                        backgroundColor: 'rgba(248, 150, 30, 0.5)',
                        borderColor: 'rgba(248, 150, 30, 0.5)',
                        borderWidth: 0,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'x'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'f(x)'
                            }
                        }
                    },
                    plugins: {
                        subtitle: {
                            display: true,
                            text: `Î”x = ${dx.toFixed(1)}, Î”y = ${deltaY.toFixed(3)}, dy = ${dy.toFixed(3)}, è¯¯å·® = ${Math.abs(deltaY - dy).toFixed(3)}`,
                            font: {
                                size: 14
                            },
                            padding: {
                                bottom: 10
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex < 2) {
                                        return context.dataset.label + ': ' + context.parsed.y.toFixed(2);
                                    }
                                    return null;
                                }
                            }
                        }
                    }
                }
            });
            
            // æ·»åŠ ç‰¹æ®Šç‚¹æ ‡æ³¨
            differentialChart.data.datasets[2].data[labels.indexOf(x0.toFixed(1))] = y0;
            differentialChart.data.datasets[2].data[labels.indexOf(x1.toFixed(1))] = y1;
            
            differentialChart.data.datasets[3].data[labels.indexOf(x0.toFixed(1))] = y0;
            differentialChart.data.datasets[3].data[labels.indexOf(x1.toFixed(1))] = y0 + dy;
            
            differentialChart.update();
        }
        
        // é“¾å¼æ³•åˆ™æ¼”ç¤ºæ–‡æœ¬
        function updateChainRuleDemo() {
            const select = document.getElementById('chain-rule-select');
            const demo = document.getElementById('chain-rule-demo');
            let content = '';
            
            switch(select.value) {
                case 'sin2x':
                    content = `
                        <p>å¯¹äº y = sin(2x)ï¼š</p>
                        <p>ä»¤ u = 2xï¼Œåˆ™ y = sin(u)</p>
                        <p>$$\frac{dy}{dx} = \frac{dy}{du} \cdot \frac{du}{dx} = \cos(u) \cdot 2 = 2\cos(2x)$$</p>
                        <p><small>æ¯”å–»ï¼šå°±åƒå‰¥æ´‹è‘±ï¼Œå…ˆå‰¥sinï¼Œå†å‰¥2x</small></p>
                    `;
                    break;
                case 'sqrtcosx':
                    content = `
                        <p>å¯¹äº y = âˆšcos(x)ï¼š</p>
                        <p>ä»¤ u = cos(x)ï¼Œåˆ™ y = âˆšu = u^{1/2}</p>
                        <p>$$\frac{dy}{dx} = \frac{1}{2}u^{-1/2} \cdot (-\sin(x)) = -\frac{\sin(x)}{2\sqrt{\cos(x)}}$$</p>
                        <p><small>æ¯”å–»ï¼šå…ˆå¼€æ–¹ï¼Œå†cosï¼Œæœ€åxï¼Œä»å¤–åˆ°å†…å‰¥ä¸‰å±‚</small></p>
                    `;
                    break;
                case 'exp3x':
                    content = `
                        <p>å¯¹äº y = e^{3xÂ²}ï¼š</p>
                        <p>ä»¤ u = 3xÂ²ï¼Œåˆ™ y = e^u</p>
                        <p>$$\frac{dy}{dx} = e^u \cdot 6x = 6x e^{3x^2}$$</p>
                        <p><small>æ¯”å–»ï¼šeå‡½æ•°æ˜¯å¤–å¥—ï¼Œ3xÂ²æ˜¯å†…è¡¬ï¼Œxæ˜¯æœ€é‡Œé¢çš„Tæ¤</small></p>
                    `;
                    break;
            }
            
            demo.innerHTML = content;
            
            // é‡æ–°æ¸²æŸ“MathJax
            if (window.MathJax) {
                MathJax.typesetPromise([demo]);
            }
        }
    </script>
</body>
</html>