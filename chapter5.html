<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®šç§¯åˆ†å®Œå…¨æŒ‡å—ï¼šçŸ¥è¯†ç‚¹+ç»ƒä¹ é¢˜å…¨è¦†ç›–</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" async></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        header:before {
            content: "âˆ«";
            position: absolute;
            font-size: 300px;
            opacity: 0.1;
            right: 50px;
            top: 10px;
            font-weight: bold;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            font-style: italic;
            opacity: 0.9;
        }
        
        .container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }
        
        .main-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        h2 {
            color: #2575fc;
            border-bottom: 3px solid #6a11cb;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        h3 {
            color: #6a11cb;
            margin: 20px 0 15px;
            font-size: 1.4rem;
        }
        
        .knowledge-point {
            background: #f8f9ff;
            border-left: 5px solid #2575fc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            transition: transform 0.3s;
        }
        
        .knowledge-point:hover {
            transform: translateX(5px);
        }
        
        .self-reflection {
            background: #fff8e1;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            font-style: italic;
        }
        
        .math-history {
            background: #e8f5e9;
            border-left: 5px solid #4caf50;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            font-style: italic;
        }
        
        .formula {
            background: #e8f4fd;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2rem;
            overflow-x: auto;
        }
        
        .exercise {
            background: #e8f7e9;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border-left: 5px solid #4caf50;
        }
        
        .exercise h4 {
            color: #2e7d32;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .answer {
            background: #f1f8e9;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            display: none;
        }
        
        .show-answer {
            background: #4caf50;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.3s;
        }
        
        .show-answer:hover {
            background: #388e3c;
        }
        
        .important-note {
            background: #ffebee;
            border-left: 5px solid #f44336;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .humor-box {
            background: #fff3e0;
            border-left: 5px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .graph-container {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .canvas-container {
            width: 100%;
            height: 300px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .dual-canvas-container {
            display: flex;
            gap: 20px;
            margin: 15px 0;
        }
        
        .dual-canvas-container > div {
            flex: 1;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        button {
            background: #2575fc;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #6a11cb;
            transform: translateY(-2px);
        }
        
        .toc {
            position: sticky;
            top: 20px;
        }
        
        .toc ul {
            list-style-type: none;
        }
        
        .toc li {
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
            background: #f8f9ff;
            transition: all 0.3s;
        }
        
        .toc li:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }
        
        .toc a {
            text-decoration: none;
            color: #2575fc;
            display: block;
            font-weight: 500;
        }
        
        .chapter-summary {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            padding: 25px;
            border-radius: 15px;
        }
        
        .fire-icon {
            color: #ff5722;
            margin: 0 5px;
        }
        
        .method-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .method-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            border-top: 4px solid;
            transition: transform 0.3s;
        }
        
        .method-card:hover {
            transform: translateY(-5px);
        }
        
        .substitution-card {
            border-top-color: #6a11cb;
        }
        
        .byparts-card {
            border-top-color: #ff9800;
        }
        
        .method-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .substitution-icon {
            color: #6a11cb;
        }
        
        .byparts-icon {
            color: #ff9800;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
        }
        
        .nav-btn {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .method-visual {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .method-canvas-container {
            width: 100%;
            height: 200px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .variable-limit {
            background: #e1f5fe;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #0288d1;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #ddd;
        }
        
        .exercise-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .exercise-item {
            background: #f1f8e9;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
        }
        
        @media (max-width: 1100px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .toc {
                position: static;
            }
            
            .method-comparison, .exercise-grid {
                grid-template-columns: 1fr;
            }
            
            .dual-canvas-container {
                flex-direction: column;
            }
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }
            
            .dual-canvas-container {
                flex-direction: column;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-calculator"></i> å®šç§¯åˆ†å®Œå…¨æŒ‡å—ï¼šçŸ¥è¯†ç‚¹+ç»ƒä¹ é¢˜å…¨è¦†ç›–</h1>
        <p class="subtitle">åŒæµé«˜æ•°(ç¬¬ä¸ƒ/å…«ç‰ˆ) ç¬¬äº”ç«  Â· ç»ˆæå®Œæ•´ç‰ˆ | æ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½æœ‰é…å¥—ç»ƒä¹ é¢˜</p>
        <p style="margin-top: 15px;">"å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œå­¦äº†å°±ç»ƒçœŸåŠŸå¤«ï¼æ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½æœ‰ç»ƒä¹ é¢˜ï¼Œç»ƒå®Œä½ å°±æ˜¯ç§¯åˆ†é«˜æ‰‹ï¼"</p>
    </header>
    
    <div class="container">
        <main class="main-content">
            <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼•è¨€ä¸å†å² -->
            <section id="intro">
                <h2><i class="fas fa-door-open"></i> å¼€ç¯‡ï¼šå¾®ç§¯åˆ†çš„"ä¸–çºªä¹‹äº‰"</h2>
                
                <div class="math-history">
                    <h3><i class="fas fa-landmark"></i> æ•°å­¦å²è¶£é—»ï¼šç‰›é¡¿ä¸è±å¸ƒå°¼èŒ¨çš„ä¼˜å…ˆæƒä¹‹äº‰</h3>
                    <p>17ä¸–çºªæœ«ï¼Œç‰›é¡¿å’Œè±å¸ƒå°¼èŒ¨å‡ ä¹åŒæ—¶ç‹¬ç«‹å‘æ˜äº†å¾®ç§¯åˆ†ã€‚ç‰›é¡¿ç”¨"æµæ•°æœ¯"ï¼Œè±å¸ƒå°¼èŒ¨å‘æ˜äº†dxã€dyå’Œâˆ«ç¬¦å·ã€‚ä¸¤äººåµäº†å‡ åå¹´ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“ä»–ä»¬éƒ½æ˜¯å¾®ç§¯åˆ†çš„åˆ›å§‹äººï¼</p>
                </div>
                
                <div class="knowledge-point">
                    <p>å®šç§¯åˆ†ï¼Œå…¶å®å°±æ˜¯<strong>"æ›²çº¿ä¸‹çš„é¢ç§¯"</strong>ã€‚ä»æ±‚ä¸è§„åˆ™å›¾å½¢é¢ç§¯ï¼Œåˆ°è®¡ç®—å˜åŠ›åšåŠŸï¼Œå®šç§¯åˆ†å°±åƒæ•°å­¦ç•Œçš„"ç‘å£«å†›åˆ€"ï¼</p>
                </div>
                
                <div class="humor-box">
                    <p><strong>ğŸ¤£ æ•°å­¦å†·ç¬‘è¯ï¼š</strong>ä¸ºä»€ä¹ˆå®šç§¯åˆ†ç¬¦å·âˆ«é•¿å¾—åƒæ‹‰é•¿çš„Sï¼Ÿå› ä¸ºå®ƒåœ¨è¯´ï¼š"Sumï¼ˆæ±‚å’Œï¼‰ï¼æˆ‘å°±æ˜¯æ¥æ±‚å’Œçš„ï¼"</p>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> å¼€ç¯‡æ€è€ƒé¢˜</h4>
                    <p>1. ä¸ºä»€ä¹ˆç‰›é¡¿å’Œè±å¸ƒå°¼èŒ¨çš„å¾®ç§¯åˆ†ç¬¦å·ä¸åŒï¼Ÿè¿™åæ˜ äº†ä»–ä»¬ä»€ä¹ˆæ ·çš„æ•°å­¦æ€æƒ³ï¼Ÿ</p>
                    <p>2. å®šç§¯åˆ†é™¤äº†è®¡ç®—é¢ç§¯ï¼Œè¿˜èƒ½è§£å†³å“ªäº›å®é™…é—®é¢˜ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('introAnswer')">æŸ¥çœ‹æ€è€ƒæç¤º</button>
                    <div class="answer" id="introAnswer">
                        <p><strong>æ€è€ƒæç¤ºï¼š</strong></p>
                        <p>1. ç‰›é¡¿çš„"æµæ•°æœ¯"å¼ºè°ƒå˜åŒ–ç‡ï¼Œè±å¸ƒå°¼èŒ¨çš„ç¬¦å·å¼ºè°ƒå¾®å°å˜åŒ–ã€‚ç¬¦å·ä¸åŒåæ˜ äº†ä»–ä»¬å¯¹å¾®ç§¯åˆ†æœ¬è´¨çš„ä¸åŒç†è§£ã€‚</p>
                        <p>2. å®šç§¯åˆ†å¯ä»¥è®¡ç®—ï¼šå˜åŠ›åšåŠŸã€æ¶²ä½“å‹åŠ›ã€æ›²çº¿å¼§é•¿ã€æ—‹è½¬ä½“ä½“ç§¯ã€è´¨å¿ƒä½ç½®ã€æ¦‚ç‡å¯†åº¦å‡½æ•°ä¸‹çš„æ¦‚ç‡ç­‰ã€‚</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šå®šç§¯åˆ†å®šä¹‰ä¸é»æ›¼å’Œ -->
            <section id="definition">
                <h2><i class="fas fa-brain"></i> å®šç§¯åˆ†çš„å®šä¹‰ï¼šä»"åˆ†å‰²"åˆ°"æ±‚å’Œ"çš„å“²å­¦</h2>
                
                <div class="knowledge-point">
                    <h3>1. å®šç§¯åˆ†çš„å®šä¹‰</h3>
                    <p>è®¾å‡½æ•°\(f(x)\)åœ¨åŒºé—´\([a,b]\)ä¸Šæœ‰ç•Œï¼Œå°†åŒºé—´åˆ†å‰²æˆ\(n\)ä¸ªå°åŒºé—´ï¼Œä½œå’Œå¼ï¼š</p>
                    <div class="formula">
                        $$\sum_{i=1}^{n} f(\xi_i) \Delta x_i$$
                    </div>
                    <p>å½“æœ€å¤§åŒºé—´é•¿åº¦\(\lambda \to 0\)æ—¶ï¼Œå’Œå¼çš„æé™ç§°ä¸ºå®šç§¯åˆ†ï¼š</p>
                    <div class="formula">
                        $$\int_{a}^{b} f(x) dx = \lim_{\lambda \to 0} \sum_{i=1}^{n} f(\xi_i) \Delta x_i$$
                    </div>
                </div>
                
                <div class="graph-container">
                    <h3>å¯è§†åŒ–ç†è§£ï¼šå®šç§¯åˆ†å°±æ˜¯"æ— ç©·ç»†åˆ†"çš„è¿‡ç¨‹</h3>
                    <div class="canvas-container">
                        <canvas id="riemannCanvas" width="600" height="250"></canvas>
                    </div>
                    <div class="controls">
                        <button id="moreRectangles"><i class="fas fa-plus"></i> å¢åŠ ç»†åˆ†</button>
                        <button id="fewerRectangles"><i class="fas fa-minus"></i> å‡å°‘ç»†åˆ†</button>
                        <button id="changeFunction"><i class="fas fa-sync-alt"></i> åˆ‡æ¢å‡½æ•°</button>
                    </div>
                    <p id="rectCount">å½“å‰åˆ†å‰²æ•°ï¼š4 Â· çŸ©å½¢é¢ç§¯å’Œï¼š<span id="areaSum">0</span> Â· å®é™…ç§¯åˆ†å€¼ï¼š<span id="trueValue">0</span></p>
                </div>
                
                <div class="exercise-grid">
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜1.1ï¼šç†è§£å®šä¹‰</h4>
                        <p>ç”¨å®šç§¯åˆ†çš„å®šä¹‰è¡¨ç¤ºæ›²çº¿\(y=x^3\)åœ¨åŒºé—´\([0,1]\)ä¸Šä¸xè½´å›´æˆçš„é¢ç§¯ã€‚</p>
                        <button class="show-answer" onclick="toggleAnswer('defAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="defAnswer1">
                            <p><strong>è§£ï¼š</strong>\(\int_0^1 x^3 dx = \lim_{n \to \infty} \sum_{i=1}^n \left(\frac{i}{n}\right)^3 \cdot \frac{1}{n}\)</p>
                        </div>
                    </div>
                    
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜1.2ï¼šè®¡ç®—æé™</h4>
                        <p>ç”¨å®šç§¯åˆ†å®šä¹‰è®¡ç®—æé™ï¼š\(\lim_{n \to \infty} \frac{1}{n} \sum_{i=1}^n \sqrt{1 + \frac{i}{n}}\)</p>
                        <button class="show-answer" onclick="toggleAnswer('defAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="defAnswer2">
                            <p><strong>è§£ï¼š</strong>åŸå¼ = \(\int_0^1 \sqrt{1+x} dx = \frac{2}{3}(1+x)^{3/2} \big|_0^1 = \frac{2}{3}(2\sqrt{2} - 1)\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜1.3ï¼šç»¼åˆåº”ç”¨</h4>
                    <p>ç”¨å®šç§¯åˆ†çš„å®šä¹‰è®¡ç®— \(\int_{0}^{1} (2x+1) dx\)ï¼Œå¹¶ä¸å‡ ä½•æ–¹æ³•è®¡ç®—ç»“æœè¿›è¡Œæ¯”è¾ƒã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('defAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="defAnswer3">
                        <p><strong>è§£ï¼š</strong>å°†åŒºé—´[0,1]nç­‰åˆ†ï¼Œ\(\Delta x = \frac{1}{n}\)ï¼Œå–\(\xi_i = \frac{i}{n}\)</p>
                        <p>\[\sum_{i=1}^{n} f(\xi_i) \Delta x = \sum_{i=1}^{n} \left(2\cdot\frac{i}{n}+1\right) \cdot \frac{1}{n} = \frac{2}{n^2}\sum_{i=1}^{n} i + \frac{1}{n}\sum_{i=1}^{n} 1\]</p>
                        <p>\[= \frac{2}{n^2} \cdot \frac{n(n+1)}{2} + 1 = \frac{n+1}{n} + 1\]</p>
                        <p>å½“\(n \to \infty\)æ—¶ï¼Œæé™ä¸º\(1+1=2\)</p>
                        <p><strong>å‡ ä½•éªŒè¯ï¼š</strong>è¿™æ˜¯æ¢¯å½¢é¢ç§¯ï¼Œä¸Šåº•1ï¼Œä¸‹åº•3ï¼Œé«˜1ï¼Œé¢ç§¯=\(\frac{1+3}{2}Ã—1=2\)</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šå®šç§¯åˆ†æ€§è´¨ -->
            <section id="properties">
                <h2><i class="fas fa-gavel"></i> å®šç§¯åˆ†çš„æ€§è´¨</h2>
                
                <div class="knowledge-point">
                    <h3>1. çº¿æ€§æ€§è´¨</h3>
                    <div class="formula">
                        $$\int_a^b [\alpha f(x) + \beta g(x)] dx = \alpha \int_a^b f(x) dx + \beta \int_a^b g(x) dx$$
                    </div>
                    
                    <h3>2. åŒºé—´å¯åŠ æ€§</h3>
                    <div class="formula">
                        $$\int_a^b f(x) dx = \int_a^c f(x) dx + \int_c^b f(x) dx$$
                    </div>
                    
                    <h3>3. ç§¯åˆ†ä¸ç­‰å¼</h3>
                    <div class="formula">
                        è‹¥åœ¨\([a,b]\)ä¸Š\(f(x) \leq g(x)\)ï¼Œåˆ™\(\int_a^b f(x) dx \leq \int_a^b g(x) dx\)
                    </div>
                </div>
                
                <div class="exercise-grid">
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜2.1ï¼šçº¿æ€§æ€§è´¨</h4>
                        <p>å·²çŸ¥\(\int_0^1 f(x)dx = 2\)ï¼Œ\(\int_0^1 g(x)dx = 3\)ï¼Œæ±‚\(\int_0^1 [3f(x) - 2g(x)]dx\)</p>
                        <button class="show-answer" onclick="toggleAnswer('propAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="propAnswer1">
                            <p><strong>è§£ï¼š</strong>åŸå¼ = \(3\int_0^1 f(x)dx - 2\int_0^1 g(x)dx = 3Ã—2 - 2Ã—3 = 0\)</p>
                        </div>
                    </div>
                    
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜2.2ï¼šåŒºé—´å¯åŠ æ€§</h4>
                        <p>å·²çŸ¥\(\int_0^2 f(x)dx = 5\)ï¼Œ\(\int_1^3 f(x)dx = 6\)ï¼Œ\(\int_1^2 f(x)dx = 2\)ï¼Œæ±‚\(\int_0^3 f(x)dx\)</p>
                        <button class="show-answer" onclick="toggleAnswer('propAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="propAnswer2">
                            <p><strong>è§£ï¼š</strong>\(\int_0^3 f(x)dx = \int_0^1 f(x)dx + \int_1^2 f(x)dx + \int_2^3 f(x)dx\)</p>
                            <p>ç”±å·²çŸ¥ï¼š\(\int_0^1 f(x)dx = 5-2=3\)ï¼Œ\(\int_2^3 f(x)dx = 6-2=4\)</p>
                            <p>æ‰€ä»¥åŸå¼ = \(3+2+4=9\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜2.3ï¼šç§¯åˆ†ä¸ç­‰å¼</h4>
                    <p>è¯æ˜ï¼š\(0 \leq \int_0^{\pi/2} \frac{\sin x}{1+x^2} dx \leq \int_0^{\pi/2} \sin x dx\)</p>
                    <button class="show-answer" onclick="toggleAnswer('propAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="propAnswer3">
                        <p><strong>è¯æ˜ï¼š</strong>åœ¨\([0, \pi/2]\)ä¸Šï¼Œ\(0 \leq \frac{1}{1+x^2} \leq 1\)</p>
                        <p>æ‰€ä»¥\(0 \leq \frac{\sin x}{1+x^2} \leq \sin x\)</p>
                        <p>ç”±ç§¯åˆ†ä¸ç­‰å¼æ€§è´¨ï¼š\(0 \leq \int_0^{\pi/2} \frac{\sin x}{1+x^2} dx \leq \int_0^{\pi/2} \sin x dx\)</p>
                        <p>è¯æ¯•ã€‚</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬å››éƒ¨åˆ†ï¼šå˜é™ç§¯åˆ†æ±‚å¯¼ -->
            <section id="variable-limit">
                <h2><i class="fas fa-chart-line"></i> å˜é™ç§¯åˆ†æ±‚å¯¼</h2>
                
                <div class="knowledge-point">
                    <div class="variable-limit">
                        <h3>å˜é™ç§¯åˆ†æ±‚å¯¼å…¬å¼</h3>
                        <div class="formula">
                            $$\frac{d}{dx} \int_a^x f(t) dt = f(x)$$
                        </div>
                        <div class="formula">
                            $$\frac{d}{dx} \int_{u(x)}^{v(x)} f(t) dt = f[v(x)] \cdot v'(x) - f[u(x)] \cdot u'(x)$$
                        </div>
                    </div>
                    
                    <div class="humor-box">
                        <p><strong>ğŸš´ å¤–å–å°å“¥æ¯”å–»ï¼š</strong>é€åˆ°ä¸Šé™å®¶ï¼ˆå¸¦å…¥ä¸Šé™ï¼‰è¦è·‘å¿«ç‚¹ï¼ˆä¹˜å¯¼ï¼‰ï¼Œä»ä¸‹é™å®¶ï¼ˆå¸¦å…¥ä¸‹é™ï¼‰å‡ºå‘ä¹Ÿè¦è·‘å¿«ç‚¹ï¼ˆä¹˜å¯¼ï¼‰ï¼Œä½†æ–¹å‘ç›¸åï¼ˆå‡ï¼‰ï¼</p>
                    </div>
                </div>
                
                <div class="graph-container">
                    <h3>å˜é™ç§¯åˆ†å¯è§†åŒ–ï¼šé¢ç§¯å‡½æ•°çš„å˜åŒ–ç‡</h3>
                    <div class="canvas-container">
                        <canvas id="variableLimitCanvas" width="600" height="250"></canvas>
                    </div>
                    <div class="controls">
                        <button id="moveUpperLimit"><i class="fas fa-arrow-right"></i> ç§»åŠ¨ä¸Šé™</button>
                        <button id="resetLimit"><i class="fas fa-redo"></i> é‡ç½®</button>
                        <button id="changeVarFunction"><i class="fas fa-sync-alt"></i> åˆ‡æ¢å‡½æ•°</button>
                    </div>
                    <p id="varLimitInfo">å½“å‰ï¼šÎ¦(x) = âˆ«â‚€^x <span id="currentFuncDisplay">tÂ²</span> dt Â· Î¦'(x) = <span id="derivativeValue">xÂ²</span> Â· å½“å‰xå€¼ï¼š<span id="currentX">1.00</span></p>
                </div>
                
                <div class="exercise-grid">
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜3.1ï¼šåŸºæœ¬æ±‚å¯¼</h4>
                        <p>æ±‚\(\frac{d}{dx} \int_0^{x^2} \cos t dt\)</p>
                        <button class="show-answer" onclick="toggleAnswer('varAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="varAnswer1">
                            <p><strong>è§£ï¼š</strong>\(\frac{d}{dx} \int_0^{x^2} \cos t dt = \cos(x^2) \cdot (x^2)' = 2x \cos(x^2)\)</p>
                        </div>
                    </div>
                    
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜3.2ï¼šä¸Šä¸‹é™éƒ½æ˜¯å‡½æ•°</h4>
                        <p>æ±‚\(\frac{d}{dx} \int_{\sin x}^{\cos x} e^{t^2} dt\)</p>
                        <button class="show-answer" onclick="toggleAnswer('varAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="varAnswer2">
                            <p><strong>è§£ï¼š</strong>åŸå¼ = \(e^{\cos^2 x} \cdot (\cos x)' - e^{\sin^2 x} \cdot (\sin x)'\)</p>
                            <p> = \(-e^{\cos^2 x} \sin x - e^{\sin^2 x} \cos x\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜3.3ï¼šç»¼åˆåº”ç”¨</h4>
                    <p>è®¾\(F(x) = \int_0^{x^2} (x-t) \sin t dt\)ï¼Œæ±‚\(F'(x)\)ã€‚</p>
                    <button class="show-answer" onclick="toggleAnswer('varAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="varAnswer3">
                        <p><strong>è§£ï¼š</strong>æ³¨æ„è¢«ç§¯å‡½æ•°ä¸­å«æœ‰xï¼Œä¸èƒ½ç›´æ¥å¥—å…¬å¼ï¼</p>
                        <p>å…ˆæ‹†åˆ†ï¼š\(F(x) = x\int_0^{x^2} \sin t dt - \int_0^{x^2} t \sin t dt\)</p>
                        <p>\(F'(x) = \int_0^{x^2} \sin t dt + x \cdot \sin(x^2) \cdot 2x - x^2 \sin(x^2) \cdot 2x\)</p>
                        <p> = \(\int_0^{x^2} \sin t dt + 2x^2 \sin(x^2) - 2x^3 \sin(x^2)\)</p>
                        <p> = \(\int_0^{x^2} \sin t dt + 2x^2(1-x) \sin(x^2)\)</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬äº”éƒ¨åˆ†ï¼šä¸¤å¤§ç§¯åˆ†æ–¹æ³• -->
            <section id="integration-methods">
                <h2><i class="fas fa-tools"></i> å®šç§¯åˆ†çš„ä¸¤å¤§"ç¥å™¨"ï¼šæ¢å…ƒæ³•ä¸åˆ†éƒ¨ç§¯åˆ†æ³•</h2>
                
                <div class="method-comparison">
                    <div class="method-card substitution-card">
                        <i class="fas fa-exchange-alt method-icon substitution-icon"></i>
                        <h3><i class="fas fa-exchange-alt"></i> æ¢å…ƒç§¯åˆ†æ³•</h3>
                        <div class="formula">
                            $$\int_a^b f(x) dx = \int_\alpha^\beta f[\varphi(t)] \varphi'(t) dt$$
                        </div>
                    </div>
                    
                    <div class="method-card byparts-card">
                        <i class="fas fa-project-diagram method-icon byparts-icon"></i>
                        <h3><i class="fas fa-project-diagram"></i> åˆ†éƒ¨ç§¯åˆ†æ³•</h3>
                        <div class="formula">
                            $$\int_a^b u dv = uv \big|_a^b - \int_a^b v du$$
                        </div>
                    </div>
                </div>
                
                <!-- æ¢å…ƒæ³•ç»ƒä¹ é¢˜ -->
                <div class="exercise">
                    <h4><i class="fas fa-exchange-alt"></i> æ¢å…ƒæ³•ç»ƒä¹ é¢˜</h4>
                    
                    <div class="exercise-grid">
                        <div class="exercise-item">
                            <h5>ç»ƒä¹ é¢˜4.1ï¼šå‡‘å¾®åˆ†æ³•</h5>
                            <p>è®¡ç®— \(\int_0^{\pi/2} \sin^3 x \cos x dx\)</p>
                            <button class="show-answer" onclick="toggleAnswer('subAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                            <div class="answer" id="subAnswer1">
                                <p><strong>è§£ï¼š</strong>ä»¤\(u = \sin x\)ï¼Œåˆ™\(du = \cos x dx\)</p>
                                <p>å½“\(x=0\)æ—¶ï¼Œ\(u=0\)ï¼›å½“\(x=\pi/2\)æ—¶ï¼Œ\(u=1\)</p>
                                <p>åŸå¼ = \(\int_0^1 u^3 du = \frac{1}{4}u^4 \big|_0^1 = \frac{1}{4}\)</p>
                            </div>
                        </div>
                        
                        <div class="exercise-item">
                            <h5>ç»ƒä¹ é¢˜4.2ï¼šç¬¬äºŒç±»æ¢å…ƒæ³•</h5>
                            <p>è®¡ç®— \(\int_0^1 \sqrt{1 - x^2} dx\)</p>
                            <button class="show-answer" onclick="toggleAnswer('subAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                            <div class="answer" id="subAnswer2">
                                <p><strong>è§£ï¼š</strong>ä»¤\(x = \sin t\)ï¼Œåˆ™\(dx = \cos t dt\)</p>
                                <p>å½“\(x=0\)æ—¶ï¼Œ\(t=0\)ï¼›å½“\(x=1\)æ—¶ï¼Œ\(t=\pi/2\)</p>
                                <p>åŸå¼ = \(\int_0^{\pi/2} \cos^2 t dt = \frac{\pi}{4}\)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exercise-item" style="margin-top: 15px;">
                        <h5>ç»ƒä¹ é¢˜4.3ï¼šç»¼åˆæ¢å…ƒ</h5>
                        <p>è®¡ç®— \(\int_0^{\ln 2} \sqrt{e^x - 1} dx\)</p>
                        <button class="show-answer" onclick="toggleAnswer('subAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="subAnswer3">
                            <p><strong>è§£ï¼š</strong>ä»¤\(t = \sqrt{e^x - 1}\)ï¼Œåˆ™\(t^2 = e^x - 1\)ï¼Œ\(e^x = t^2+1\)</p>
                            <p>\(dx = \frac{2t}{t^2+1} dt\)ï¼Œå½“\(x=0\)æ—¶ï¼Œ\(t=0\)ï¼›å½“\(x=\ln 2\)æ—¶ï¼Œ\(t=1\)</p>
                            <p>åŸå¼ = \(\int_0^1 t \cdot \frac{2t}{t^2+1} dt = 2\int_0^1 \left(1 - \frac{1}{t^2+1}\right) dt\)</p>
                            <p> = \(2\left[t - \arctan t\right]_0^1 = 2 - \frac{\pi}{2}\)</p>
                        </div>
                    </div>
                </div>
                
                <!-- åˆ†éƒ¨ç§¯åˆ†æ³•ç»ƒä¹ é¢˜ -->
                <div class="exercise">
                    <h4><i class="fas fa-project-diagram"></i> åˆ†éƒ¨ç§¯åˆ†æ³•ç»ƒä¹ é¢˜</h4>
                    
                    <div class="exercise-grid">
                        <div class="exercise-item">
                            <h5>ç»ƒä¹ é¢˜4.4ï¼šé™å¹‚å‹</h5>
                            <p>è®¡ç®— \(\int_0^1 x^2 e^x dx\)</p>
                            <button class="show-answer" onclick="toggleAnswer('bpAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                            <div class="answer" id="bpAnswer1">
                                <p><strong>è§£ï¼š</strong>ä»¤\(u = x^2\)ï¼Œ\(dv = e^x dx\)ï¼Œåˆ™\(du = 2x dx\)ï¼Œ\(v = e^x\)</p>
                                <p>åŸå¼ = \(x^2 e^x \big|_0^1 - 2\int_0^1 x e^x dx = e - 2\left(x e^x \big|_0^1 - \int_0^1 e^x dx\right)\)</p>
                                <p> = \(e - 2\left(e - (e-1)\right) = e - 2\)</p>
                            </div>
                        </div>
                        
                        <div class="exercise-item">
                            <h5>ç»ƒä¹ é¢˜4.5ï¼šå¾ªç¯å‹</h5>
                            <p>è®¡ç®— \(\int e^{2x} \sin x dx\)</p>
                            <button class="show-answer" onclick="toggleAnswer('bpAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                            <div class="answer" id="bpAnswer2">
                                <p><strong>è§£ï¼š</strong>è®¾\(I = \int e^{2x} \sin x dx\)</p>
                                <p>åˆ†éƒ¨å¾—ï¼š\(I = \frac{1}{2}e^{2x} \sin x - \frac{1}{2}\int e^{2x} \cos x dx\)</p>
                                <p>å†åˆ†éƒ¨ï¼š\(I = \frac{1}{2}e^{2x} \sin x - \frac{1}{2}\left(\frac{1}{2}e^{2x} \cos x + \frac{1}{2}I\right)\)</p>
                                <p>è§£å¾—ï¼š\(I = \frac{1}{5}e^{2x}(2\sin x - \cos x) + C\)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="exercise-item" style="margin-top: 15px;">
                        <h5>ç»ƒä¹ é¢˜4.6ï¼šé€’æ¨å…¬å¼</h5>
                        <p>è®¾\(I_n = \int x^n e^x dx\)ï¼Œå»ºç«‹é€’æ¨å…¬å¼å¹¶è®¡ç®—\(I_3\)</p>
                        <button class="show-answer" onclick="toggleAnswer('bpAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="bpAnswer3">
                            <p><strong>è§£ï¼š</strong>\(I_n = x^n e^x - n\int x^{n-1} e^x dx = x^n e^x - n I_{n-1}\)</p>
                            <p>\(I_3 = x^3 e^x - 3I_2 = x^3 e^x - 3(x^2 e^x - 2I_1)\)</p>
                            <p> = \(x^3 e^x - 3x^2 e^x + 6(x e^x - I_0)\)</p>
                            <p> = \(x^3 e^x - 3x^2 e^x + 6x e^x - 6e^x + C\)</p>
                            <p> = \(e^x(x^3 - 3x^2 + 6x - 6) + C\)</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬å…­éƒ¨åˆ†ï¼šç§¯åˆ†ä¸­å€¼å®šç† -->
            <section id="mean-value-theorem">
                <h2><i class="fas fa-balance-scale"></i> ç§¯åˆ†ä¸­å€¼å®šç†</h2>
                
                <div class="knowledge-point">
                    <h3>ç§¯åˆ†ç¬¬ä¸€ä¸­å€¼å®šç†</h3>
                    <div class="formula">
                        $$\int_a^b f(x) dx = f(\xi)(b-a) \quad (\xi \in [a,b])$$
                    </div>
                </div>
                
                <div class="graph-container">
                    <h3>ç§¯åˆ†ä¸­å€¼å®šç†å¯è§†åŒ–</h3>
                    <div class="canvas-container">
                        <canvas id="meanValueCanvas" width="600" height="250"></canvas>
                    </div>
                    <div class="controls">
                        <button id="changeMeanFunction"><i class="fas fa-sync-alt"></i> åˆ‡æ¢å‡½æ•°</button>
                        <button id="toggleMeanLine"><i class="fas fa-eye"></i> æ˜¾ç¤º/éšè—å¹³å‡å€¼çº¿</button>
                        <button id="findMeanPoint"><i class="fas fa-search"></i> å¯»æ‰¾Î¾ç‚¹</button>
                    </div>
                    <p id="meanInfo">å‡½æ•°ï¼š<span id="meanFuncName">xÂ²</span> Â· å¹³å‡å€¼ï¼š<span id="meanValue">0</span> Â· Î¾ç‚¹ï¼š<span id="xiPoint">å°šæœªè®¡ç®—</span></p>
                </div>
                
                <div class="exercise-grid">
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜5.1ï¼šåŸºæœ¬åº”ç”¨</h4>
                        <p>è®¾\(f(x)\)åœ¨\([0,1]\)ä¸Šè¿ç»­ï¼Œä¸”\(\int_0^1 f(x)dx = 3\)ï¼Œè¯æ˜å­˜åœ¨\(\xi \in [0,1]\)ä½¿\(f(\xi)=3\)</p>
                        <button class="show-answer" onclick="toggleAnswer('meanAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="meanAnswer1">
                            <p><strong>è¯æ˜ï¼š</strong>ç”±ç§¯åˆ†ä¸­å€¼å®šç†ï¼Œå­˜åœ¨\(\xi \in [0,1]\)ï¼Œä½¿å¾—</p>
                            <p>\(\int_0^1 f(x)dx = f(\xi)(1-0) = f(\xi)\)</p>
                            <p>å·²çŸ¥å·¦è¾¹=3ï¼Œæ‰€ä»¥\(f(\xi)=3\)ï¼Œè¯æ¯•ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜5.2ï¼šä¼°å€¼åº”ç”¨</h4>
                        <p>ä¼°è®¡ç§¯åˆ†\(\int_0^1 e^{-x^2} dx\)çš„å€¼</p>
                        <button class="show-answer" onclick="toggleAnswer('meanAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="meanAnswer2">
                            <p><strong>è§£ï¼š</strong>åœ¨\([0,1]\)ä¸Šï¼Œ\(e^{-1} \leq e^{-x^2} \leq 1\)</p>
                            <p>ç”±ç§¯åˆ†ä¸­å€¼å®šç†ï¼Œå­˜åœ¨\(\xi \in [0,1]\)ä½¿</p>
                            <p>\(\int_0^1 e^{-x^2} dx = e^{-\xi^2}\)</p>
                            <p>æ‰€ä»¥\(e^{-1} \leq \int_0^1 e^{-x^2} dx \leq 1\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜5.3ï¼šè¯æ˜é¢˜</h4>
                    <p>è®¾\(f(x)\)åœ¨\([a,b]\)ä¸Šè¿ç»­ä¸”å•è°ƒå¢åŠ ï¼Œè¯æ˜ï¼š</p>
                    <p>\(\int_a^b x f(x) dx \geq \frac{a+b}{2} \int_a^b f(x) dx\)</p>
                    <button class="show-answer" onclick="toggleAnswer('meanAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="meanAnswer3">
                        <p><strong>è¯æ˜ï¼š</strong>ä»¤\(F(x) = \int_a^x f(t) dt\)ï¼Œåˆ™\(F'(x) = f(x)\)</p>
                        <p>è€ƒè™‘å‡½æ•°\(G(x) = \int_a^x t f(t) dt - \frac{a+x}{2} \int_a^x f(t) dt\)</p>
                        <p>\(G'(x) = x f(x) - \frac{1}{2} \int_a^x f(t) dt - \frac{a+x}{2} f(x)\)</p>
                        <p> = \(\frac{x-a}{2} f(x) - \frac{1}{2} \int_a^x f(t) dt\)</p>
                        <p>ç”±ç§¯åˆ†ä¸­å€¼å®šç†ï¼Œ\(\int_a^x f(t) dt = f(\xi)(x-a)\)ï¼Œå…¶ä¸­\(\xi \in [a,x]\)</p>
                        <p>ç”±äº\(f(x)\)å•è°ƒå¢åŠ ï¼Œ\(f(\xi) \leq f(x)\)ï¼Œæ‰€ä»¥\(G'(x) \geq 0\)</p>
                        <p>å› æ­¤\(G(x)\)å•è°ƒå¢åŠ ï¼Œ\(G(b) \geq G(a) = 0\)ï¼Œè¯æ¯•ã€‚</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå¾®ç§¯åˆ†åŸºæœ¬å®šç† -->
            <section id="fundamental-theorem">
                <h2><i class="fas fa-crown"></i> å¾®ç§¯åˆ†åŸºæœ¬å®šç†</h2>
                
                <div class="knowledge-point">
                    <h3>ç‰›é¡¿-è±å¸ƒå°¼èŒ¨å…¬å¼ï¼ˆN-Lå…¬å¼ï¼‰</h3>
                    <div class="formula">
                        $$\int_a^b f(x) dx = F(b) - F(a) = F(x) \big|_a^b$$
                    </div>
                </div>
                
                <div class="important-note">
                    <p><strong>âš ï¸ æ˜“é”™ç‚¹æé†’ï¼š</strong>ä½¿ç”¨N-Lå…¬å¼çš„å‰ææ˜¯\(f(x)\)åœ¨\([a,b]\)ä¸Šè¿ç»­ï¼å¦‚æœæœ‰é—´æ–­ç‚¹ï¼Œéœ€è¦åˆ†æ®µå¤„ç†ã€‚</p>
                </div>
                
                <div class="exercise-grid">
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜6.1ï¼šåŸºæœ¬è®¡ç®—</h4>
                        <p>è®¡ç®— \(\int_0^{\pi} (\sin x + \cos x) dx\)</p>
                        <button class="show-answer" onclick="toggleAnswer('nlAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="nlAnswer1">
                            <p><strong>è§£ï¼š</strong>åŸå¼ = \((-\cos x + \sin x) \big|_0^{\pi}\)</p>
                            <p> = \((-\cos\pi + \sin\pi) - (-\cos 0 + \sin 0)\)</p>
                            <p> = \((1+0) - (-1+0) = 2\)</p>
                        </div>
                    </div>
                    
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜6.2ï¼šåˆ†æ®µå‡½æ•°</h4>
                        <p>è®¡ç®— \(\int_{-1}^2 |x| dx\)</p>
                        <button class="show-answer" onclick="toggleAnswer('nlAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="nlAnswer2">
                            <p><strong>è§£ï¼š</strong>åˆ†æ®µå¤„ç†ï¼š</p>
                            <p>\(\int_{-1}^2 |x| dx = \int_{-1}^0 (-x) dx + \int_0^2 x dx\)</p>
                            <p> = \(-\frac{1}{2}x^2 \big|_{-1}^0 + \frac{1}{2}x^2 \big|_0^2\)</p>
                            <p> = \(0 - (-\frac{1}{2}) + (2-0) = \frac{1}{2} + 2 = \frac{5}{2}\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜6.3ï¼šç»¼åˆåº”ç”¨</h4>
                    <p>è®¾\(f(x) = \begin{cases} x^2, & 0 \leq x \leq 1 \\ 2-x, & 1 < x \leq 2 \end{cases}\)ï¼Œæ±‚\(\int_0^2 f(x) dx\)</p>
                    <button class="show-answer" onclick="toggleAnswer('nlAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="nlAnswer3">
                        <p><strong>è§£ï¼š</strong>åˆ†æ®µç§¯åˆ†ï¼š</p>
                        <p>\(\int_0^2 f(x) dx = \int_0^1 x^2 dx + \int_1^2 (2-x) dx\)</p>
                        <p> = \(\frac{1}{3}x^3 \big|_0^1 + \left(2x - \frac{1}{2}x^2\right) \big|_1^2\)</p>
                        <p> = \(\frac{1}{3} + \left[(4-2) - (2-\frac{1}{2})\right]\)</p>
                        <p> = \(\frac{1}{3} + \left[2 - \frac{3}{2}\right] = \frac{1}{3} + \frac{1}{2} = \frac{5}{6}\)</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬å…«éƒ¨åˆ†ï¼šåè±å£«å…¬å¼ -->
            <section id="wallis-formula">
                <h2><i class="fas fa-fire fire-icon"></i> åè±å£«(Wallis)å…¬å¼/"ç‚¹ç«"å…¬å¼</h2>
                
                <div class="knowledge-point">
                    <h3>ç‚¹ç«å…¬å¼</h3>
                    <div class="formula">
                        $$\int_0^{\frac{\pi}{2}} \sin^n x dx = \int_0^{\frac{\pi}{2}} \cos^n x dx = 
                        \begin{cases}
                        \frac{(n-1)!!}{n!!} \cdot \frac{\pi}{2}, & n\text{ä¸ºå¶æ•°}\\
                        \frac{(n-1)!!}{n!!}, & n\text{ä¸ºå¥‡æ•°}
                        \end{cases}$$
                    </div>
                    
                    <div class="humor-box">
                        <p><strong>ğŸ”¥ ç‚¹ç«å£è¯€ï¼š</strong>å¶æ•°æœ€åä¹˜\(\frac{\pi}{2}\)ç‚¹ç«ï¼Œå¥‡æ•°æœ€åä¹˜1ç‚¹ç«ï¼</p>
                    </div>
                </div>
                
                <div class="graph-container">
                    <h3>sinâ¿xçš„ç§¯åˆ†è§„å¾‹å¯è§†åŒ–</h3>
                    <div class="canvas-container">
                        <canvas id="wallisCanvas" width="600" height="250"></canvas>
                    </div>
                    <div class="controls">
                        <button id="increasePower"><i class="fas fa-plus"></i> å¢åŠ n</button>
                        <button id="decreasePower"><i class="fas fa-minus"></i> å‡å°‘n</button>
                        <button id="toggleWallis"><i class="fas fa-bolt"></i> æ˜¾ç¤ºç‚¹ç«è¿‡ç¨‹</button>
                    </div>
                    <p id="wallisInfo">å½“å‰ï¼š<span id="wallisFormula">âˆ«â‚€^{Ï€/2} sinÂ¹x dx = 1</span> Â· è®¡ç®—è¿‡ç¨‹ï¼š<span id="wallisProcess">1</span></p>
                </div>
                
                <div class="exercise-grid">
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜7.1ï¼šå¶æ•°æ¬¡å¹‚</h4>
                        <p>è®¡ç®— \(\int_0^{\pi/2} \sin^6 x dx\)</p>
                        <button class="show-answer" onclick="toggleAnswer('wallisAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="wallisAnswer1">
                            <p><strong>è§£ï¼š</strong>n=6ä¸ºå¶æ•°ï¼š\(\frac{5}{6} \cdot \frac{3}{4} \cdot \frac{1}{2} \cdot \frac{\pi}{2} = \frac{15\pi}{96} = \frac{5\pi}{32}\)</p>
                        </div>
                    </div>
                    
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜7.2ï¼šå¥‡æ•°æ¬¡å¹‚</h4>
                        <p>è®¡ç®— \(\int_0^{\pi/2} \sin^5 x dx\)</p>
                        <button class="show-answer" onclick="toggleAnswer('wallisAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="wallisAnswer2">
                            <p><strong>è§£ï¼š</strong>n=5ä¸ºå¥‡æ•°ï¼š\(\frac{4}{5} \cdot \frac{2}{3} \cdot 1 = \frac{8}{15}\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜7.3ï¼šç»¼åˆåº”ç”¨</h4>
                    <p>è®¡ç®— \(\int_0^{\pi} \sin^8 \frac{x}{2} dx\)</p>
                    <button class="show-answer" onclick="toggleAnswer('wallisAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="wallisAnswer3">
                        <p><strong>è§£ï¼š</strong>ä»¤\(t = \frac{x}{2}\)ï¼Œåˆ™\(dx = 2dt\)ï¼Œå½“\(x=0\)æ—¶\(t=0\)ï¼Œå½“\(x=\pi\)æ—¶\(t=\pi/2\)</p>
                        <p>åŸå¼ = \(\int_0^{\pi/2} \sin^8 t \cdot 2dt = 2\int_0^{\pi/2} \sin^8 t dt\)</p>
                        <p>n=8ä¸ºå¶æ•°ï¼š\(\frac{7}{8} \cdot \frac{5}{6} \cdot \frac{3}{4} \cdot \frac{1}{2} \cdot \frac{\pi}{2}\)</p>
                        <p> = \(\frac{105\pi}{2048} \times 2 = \frac{105\pi}{1024}\)</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬ä¹éƒ¨åˆ†ï¼šåå¸¸ç§¯åˆ† -->
            <section id="improper-integral">
                <h2><i class="fas fa-infinity"></i> åå¸¸ç§¯åˆ†</h2>
                
                <div class="knowledge-point">
                    <h3>1. æ— ç©·åŒºé—´ä¸Šçš„åå¸¸ç§¯åˆ†</h3>
                    <div class="formula">
                        $$\int_a^{+\infty} f(x)dx = \lim_{t \to +\infty} \int_a^t f(x)dx$$
                    </div>
                    
                    <h3>2. æ— ç•Œå‡½æ•°çš„åå¸¸ç§¯åˆ†ï¼ˆç‘•ç§¯åˆ†ï¼‰</h3>
                    <div class="formula">
                        $$\int_a^b f(x)dx = \lim_{t \to a^+} \int_t^b f(x)dx \quad (aä¸ºç‘•ç‚¹)$$
                    </div>
                    
                    <div class="important-note">
                        <p><strong>p-ç§¯åˆ†æ”¶æ•›æ€§ï¼š</strong></p>
                        <ul>
                            <li>\(\int_1^{+\infty} \frac{1}{x^p} dx\)ï¼šå½“\(p>1\)æ—¶æ”¶æ•›ï¼Œ\(p \leq 1\)æ—¶å‘æ•£</li>
                            <li>\(\int_0^1 \frac{1}{x^p} dx\)ï¼šå½“\(p<1\)æ—¶æ”¶æ•›ï¼Œ\(p \geq 1\)æ—¶å‘æ•£</li>
                        </ul>
                    </div>
                </div>
                
                <div class="graph-container">
                    <h3>åå¸¸ç§¯åˆ†å¯è§†åŒ–</h3>
                    <div class="dual-canvas-container">
                        <div>
                            <canvas id="improperCanvas1" width="300" height="250"></canvas>
                            <p>æ— ç©·åŒºé—´ï¼šâˆ«â‚^âˆ 1/xÂ² dx</p>
                        </div>
                        <div>
                            <canvas id="improperCanvas2" width="300" height="250"></canvas>
                            <p>ç‘•ç§¯åˆ†ï¼šâˆ«â‚€Â¹ 1/âˆšx dx</p>
                        </div>
                    </div>
                    <div class="controls">
                        <button id="increaseLimit"><i class="fas fa-arrow-right"></i> å¢å¤§ä¸Šé™</button>
                        <button id="decreaseLimit"><i class="fas fa-arrow-left"></i> å‡å°ä¸Šé™</button>
                        <button id="toggleImproper"><i class="fas fa-sync-alt"></i> åˆ‡æ¢ç±»å‹</button>
                    </div>
                    <p id="improperInfo">å½“å‰ç§¯åˆ†ï¼š<span id="improperFormula">âˆ«â‚^t 1/xÂ² dx</span> Â· æé™å€¼ï¼š<span id="improperLimit">1</span> Â· æ”¶æ•›æ€§ï¼š<span id="convergence">æ”¶æ•›</span></p>
                </div>
                
                <div class="exercise-grid">
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜8.1ï¼šæ— ç©·åŒºé—´ç§¯åˆ†</h4>
                        <p>è®¡ç®— \(\int_1^{+\infty} \frac{dx}{x\sqrt{x}}\)</p>
                        <button class="show-answer" onclick="toggleAnswer('impAnswer1')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="impAnswer1">
                            <p><strong>è§£ï¼š</strong>\(\int_1^{+\infty} x^{-3/2} dx = \left(-2x^{-1/2}\right) \big|_1^{+\infty}\)</p>
                            <p> = \(\lim_{t \to +\infty} (-2t^{-1/2}) - (-2) = 0 + 2 = 2\)</p>
                        </div>
                    </div>
                    
                    <div class="exercise-item">
                        <h4>ç»ƒä¹ é¢˜8.2ï¼šç‘•ç§¯åˆ†</h4>
                        <p>è®¡ç®— \(\int_0^1 \frac{dx}{\sqrt{x}}\)</p>
                        <button class="show-answer" onclick="toggleAnswer('impAnswer2')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="impAnswer2">
                            <p><strong>è§£ï¼š</strong>\(\int_0^1 x^{-1/2} dx = \lim_{t \to 0^+} \int_t^1 x^{-1/2} dx\)</p>
                            <p> = \(\lim_{t \to 0^+} \left(2\sqrt{x} \big|_t^1\right) = \lim_{t \to 0^+} (2 - 2\sqrt{t}) = 2\)</p>
                        </div>
                    </div>
                </div>
                
                <div class="exercise">
                    <h4><i class="fas fa-pencil-alt"></i> ç»ƒä¹ é¢˜8.3ï¼šæ•›æ•£æ€§åˆ¤æ–­</h4>
                    <p>åˆ¤æ–­ä¸‹åˆ—ç§¯åˆ†çš„æ•›æ•£æ€§ï¼š</p>
                    <p>(1) \(\int_1^{+\infty} \frac{dx}{x^2+1}\)</p>
                    <p>(2) \(\int_0^1 \frac{dx}{\sqrt{1-x^2}}\)</p>
                    <p>(3) \(\int_0^{+\infty} e^{-x} dx\)</p>
                    <button class="show-answer" onclick="toggleAnswer('impAnswer3')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                    <div class="answer" id="impAnswer3">
                        <p><strong>è§£ï¼š</strong></p>
                        <p>(1) æ”¶æ•›ã€‚å› ä¸º\(\frac{1}{x^2+1} \leq \frac{1}{x^2}\)ï¼Œè€Œ\(\int_1^{+\infty} \frac{dx}{x^2}\)æ”¶æ•›</p>
                        <p>(2) æ”¶æ•›ã€‚è¿™æ˜¯ç‘•ç§¯åˆ†ï¼Œç‘•ç‚¹ä¸º1ï¼Œä½†\(\frac{1}{\sqrt{1-x^2}} \sim \frac{1}{\sqrt{2(1-x)}}\)ï¼Œp=1/2<1</p>
                        <p>(3) æ”¶æ•›ã€‚\(\int_0^{+\infty} e^{-x} dx = \left(-e^{-x}\right) \big|_0^{+\infty} = 1\)</p>
                    </div>
                </div>
            </section>
            
            <!-- ç¬¬åéƒ¨åˆ†ï¼šç»¼åˆåº”ç”¨ä¸æ€»ç»“ -->
            <section id="summary">
                <h2><i class="fas fa-clipboard-list"></i> ç»¼åˆç»ƒä¹ ä¸æ€»ç»“</h2>
                
                <div class="chapter-summary">
                    <h3>é‡è¦å…¬å¼æ€»ç»“</h3>
                    <div class="exercise-grid">
                        <div class="exercise-item">
                            <h4>N-Lå…¬å¼</h4>
                            <p>\(\int_a^b f(x) dx = F(b) - F(a)\)</p>
                        </div>
                        <div class="exercise-item">
                            <h4>å˜é™ç§¯åˆ†æ±‚å¯¼</h4>
                            <p>\(\frac{d}{dx} \int_{u(x)}^{v(x)} f(t) dt = f[v(x)]v'(x) - f[u(x)]u'(x)\)</p>
                        </div>
                        <div class="exercise-item">
                            <h4>åˆ†éƒ¨ç§¯åˆ†</h4>
                            <p>\(\int u dv = uv - \int v du\)</p>
                        </div>
                        <div class="exercise-item">
                            <h4>ç§¯åˆ†ä¸­å€¼å®šç†</h4>
                            <p>\(\int_a^b f(x) dx = f(\xi)(b-a)\)</p>
                        </div>
                    </div>
                    
                    <div class="exercise">
                        <h4><i class="fas fa-pencil-alt"></i> ç»¼åˆç»ƒä¹ é¢˜</h4>
                        <p>1. è®¡ç®— \(\int_0^{\pi/2} e^{2x} \cos x dx\)</p>
                        <p>2. è®¾\(F(x) = \int_0^{x^3} \frac{\sin t}{t} dt\)ï¼Œæ±‚\(F'(x)\)</p>
                        <p>3. è¯æ˜ï¼š\(\int_0^1 \frac{dx}{1+x^2} = \frac{\pi}{4}\)</p>
                        <button class="show-answer" onclick="toggleAnswer('finalAnswer')">æ˜¾ç¤ºç­”æ¡ˆ</button>
                        <div class="answer" id="finalAnswer">
                            <p><strong>è§£ï¼š</strong></p>
                            <p>1. è®¾\(I = \int_0^{\pi/2} e^{2x} \cos x dx\)ï¼Œåˆ†éƒ¨ç§¯åˆ†ä¸¤æ¬¡å¾—å¾ªç¯æ–¹ç¨‹ï¼š</p>
                            <p>\(I = \frac{1}{5}e^{\pi} - \frac{2}{5}\)</p>
                            <p>2. \(F'(x) = \frac{\sin(x^3)}{x^3} \cdot 3x^2 = \frac{3\sin(x^3)}{x}\)</p>
                            <p>3. ä»¤\(x = \tan t\)ï¼Œåˆ™\(dx = \sec^2 t dt\)ï¼Œå½“\(x=0\)æ—¶\(t=0\)ï¼Œå½“\(x=1\)æ—¶\(t=\pi/4\)</p>
                            <p>åŸå¼ = \(\int_0^{\pi/4} \frac{\sec^2 t}{1+\tan^2 t} dt = \int_0^{\pi/4} dt = \frac{\pi}{4}\)</p>
                        </div>
                    </div>
                    
                    <div class="self-reflection">
                        <p><strong>å­¦ä¹ æ€»ç»“ï¼š</strong>é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œæˆ‘ä»¬æŒæ¡äº†å®šç§¯åˆ†çš„å®šä¹‰ã€æ€§è´¨ã€è®¡ç®—æ–¹æ³•ï¼ˆæ¢å…ƒæ³•ã€åˆ†éƒ¨ç§¯åˆ†æ³•ï¼‰å’Œåº”ç”¨ã€‚æ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½é…æœ‰ç»ƒä¹ é¢˜ï¼Œé€šè¿‡ç»ƒä¹ å·©å›ºç†è§£ã€‚</p>
                        <p><strong>å…³é”®ç‚¹ï¼š</strong>ç†è§£é»æ›¼å’Œçš„æé™æ€æƒ³ï¼ŒæŒæ¡N-Lå…¬å¼ï¼Œç†Ÿç»ƒè¿ç”¨æ¢å…ƒæ³•å’Œåˆ†éƒ¨ç§¯åˆ†æ³•ï¼Œä¼šåˆ¤æ–­åå¸¸ç§¯åˆ†çš„æ•›æ•£æ€§ã€‚</p>
                    </div>
                </div>
            </section>
            
            <div class="nav-buttons">
                <a href="#intro" class="nav-btn"><i class="fas fa-arrow-up"></i> å›åˆ°é¡¶éƒ¨</a>
                <a href="#definition" class="nav-btn">å¼€å§‹ç»ƒä¹  <i class="fas fa-pencil-alt"></i></a>
                <a href="#summary" class="nav-btn">æŸ¥çœ‹æ€»ç»“ <i class="fas fa-clipboard-list"></i></a>
            </div>
        </main>
        
        <aside class="sidebar">
            <div class="card toc">
                <h2><i class="fas fa-list-ul"></i> ç« èŠ‚ä¸ç»ƒä¹ é¢˜ç´¢å¼•</h2>
                <ul>
                    <li><a href="#intro">å¼€ç¯‡ï¼šæ•°å­¦å²è¶£é—»</a></li>
                    <li><a href="#definition">Â§1 å®šç§¯åˆ†å®šä¹‰ (3é¢˜)</a></li>
                    <li><a href="#properties">Â§2 å®šç§¯åˆ†æ€§è´¨ (3é¢˜)</a></li>
                    <li><a href="#variable-limit">Â§3 å˜é™ç§¯åˆ†æ±‚å¯¼ (3é¢˜)</a></li>
                    <li><a href="#integration-methods">Â§4 ç§¯åˆ†æ–¹æ³• (6é¢˜)</a></li>
                    <li><a href="#mean-value-theorem">Â§5 ç§¯åˆ†ä¸­å€¼å®šç† (3é¢˜)</a></li>
                    <li><a href="#fundamental-theorem">Â§6 å¾®ç§¯åˆ†åŸºæœ¬å®šç† (3é¢˜)</a></li>
                    <li><a href="#wallis-formula">Â§7 ç‚¹ç«å…¬å¼ (3é¢˜)</a></li>
                    <li><a href="#improper-integral">Â§8 åå¸¸ç§¯åˆ† (3é¢˜)</a></li>
                    <li><a href="#summary">Â§9 ç»¼åˆç»ƒä¹  (3é¢˜)</a></li>
                </ul>
                <p style="margin-top: 10px; color: #4caf50; font-weight: bold;">æ€»è®¡ï¼š30é“ç»ƒä¹ é¢˜ï¼</p>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-lightbulb"></i> è§£é¢˜æŠ€å·§é€ŸæŸ¥</h2>
                <ul>
                    <li><strong>çœ‹åˆ°æ ¹å·ï¼š</strong>è€ƒè™‘ä¸‰è§’ä»£æ¢æˆ–æ ¹å¼ä»£æ¢</li>
                    <li><strong>çœ‹åˆ°ä¹˜ç§¯ï¼š</strong>è€ƒè™‘åˆ†éƒ¨ç§¯åˆ†ï¼ˆåå¯¹å¹‚æŒ‡ä¸‰ï¼‰</li>
                    <li><strong>çœ‹åˆ°å¯¹ç§°åŒºé—´ï¼š</strong>æ£€æŸ¥å¥‡å¶æ€§</li>
                    <li><strong>çœ‹åˆ°sinâ¿xæˆ–cosâ¿xï¼š</strong>è€ƒè™‘ç‚¹ç«å…¬å¼</li>
                    <li><strong>çœ‹åˆ°æ— ç©·åŒºé—´ï¼š</strong>åˆ¤æ–­æ”¶æ•›æ€§ï¼ˆp-ç§¯åˆ†ï¼‰</li>
                </ul>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-exclamation-triangle"></i> å¸¸è§é”™è¯¯æé†’</h2>
                <ul>
                    <li>æ¢å…ƒä¸æ¢é™ï¼ˆå®šç§¯åˆ†ï¼‰</li>
                    <li>åˆ†éƒ¨ç§¯åˆ†é€‰é”™uå’Œdv</li>
                    <li>å˜é™ç§¯åˆ†æ±‚å¯¼å¿˜è®°ä¸‹é™</li>
                    <li>ä½¿ç”¨N-Lå…¬å¼å‰ä¸æ£€æŸ¥è¿ç»­æ€§</li>
                    <li>åå¸¸ç§¯åˆ†å¿˜è®°åˆ¤æ–­æ•›æ•£æ€§</li>
                </ul>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-history"></i> å¾®ç§¯åˆ†æ—¶é—´çº¿</h2>
                <ul>
                    <li>1665-1666ï¼šç‰›é¡¿å‘æ˜æµæ•°æœ¯</li>
                    <li>1675ï¼šè±å¸ƒå°¼èŒ¨å‘æ˜å¾®ç§¯åˆ†ç¬¦å·</li>
                    <li>1684ï¼šè±å¸ƒå°¼èŒ¨å‘è¡¨è®ºæ–‡</li>
                    <li>1704ï¼šç‰›é¡¿å‘è¡¨ã€Šæ±‚ç§¯æœ¯ã€‹</li>
                    <li>18ä¸–çºªï¼šä¼¯åŠªåˆ©å®¶æ—å®Œå–„æ–¹æ³•</li>
                    <li>19ä¸–çºªï¼šæŸ¯è¥¿ä¸¥æ ¼åŒ–</li>
                </ul>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-graduation-cap"></i> å­¦ä¹ è¿›åº¦æ£€æŸ¥</h2>
                <p>å®Œæˆä»¥ä¸‹ä»»åŠ¡æ‰“âœ“ï¼š</p>
                <ul>
                    <li><input type="checkbox"> ç†è§£å®šç§¯åˆ†å®šä¹‰</li>
                    <li><input type="checkbox"> æŒæ¡å˜é™ç§¯åˆ†æ±‚å¯¼</li>
                    <li><input type="checkbox"> ç†Ÿç»ƒæ¢å…ƒæ³•</li>
                    <li><input type="checkbox"> ç†Ÿç»ƒåˆ†éƒ¨ç§¯åˆ†æ³•</li>
                    <li><input type="checkbox"> ä¼šç”¨ç‚¹ç«å…¬å¼</li>
                    <li><input type="checkbox"> ä¼šåˆ¤æ–­åå¸¸ç§¯åˆ†</li>
                </ul>
                <button onclick="checkProgress()" style="margin-top: 10px; width: 100%;">æ£€æŸ¥è¿›åº¦</button>
                <p id="progressResult" style="margin-top: 10px; display: none;"></p>
            </div>
        </aside>
    </div>
    
    <footer>
        <p>Â© 2023 é«˜ç­‰æ•°å­¦å®šç§¯åˆ†å®Œå…¨æŒ‡å— | ç»ˆæå®Œæ•´ç‰ˆ | å…±åŒ…å«30é“ç»ƒä¹ é¢˜</p>
        <p style="margin-top: 10px; font-size: 0.8rem; color: #888;">æç¤ºï¼šç‚¹å‡»"æ˜¾ç¤ºç­”æ¡ˆ"æŸ¥çœ‹è¯¦ç»†è§£ç­”ï¼Œä½¿ç”¨å¯è§†åŒ–å›¾å½¢ç†è§£æŠ½è±¡æ¦‚å¿µ</p>
    </footer>

    <script>
        // ========== é€šç”¨å‡½æ•° ==========
        // åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤º/éšè—
        function toggleAnswer(id) {
            const answer = document.getElementById(id);
            if (answer.style.display === "block") {
                answer.style.display = "none";
                event.target.textContent = "æ˜¾ç¤ºç­”æ¡ˆ";
            } else {
                answer.style.display = "block";
                event.target.textContent = "éšè—ç­”æ¡ˆ";
            }
        }
        
        // å­¦ä¹ è¿›åº¦æ£€æŸ¥
        function checkProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            let checkedCount = 0;
            checkboxes.forEach(cb => {
                if (cb.checked) checkedCount++;
            });
            const percentage = Math.round((checkedCount / checkboxes.length) * 100);
            const result = document.getElementById('progressResult');
            result.style.display = 'block';
            result.innerHTML = `<strong>å­¦ä¹ è¿›åº¦ï¼š${percentage}%</strong> (${checkedCount}/${checkboxes.length} é¡¹å®Œæˆ)`;
            if (percentage === 100) {
                result.innerHTML += '<br>ğŸ‰ æ­å–œï¼ä½ å·²ç»æŒæ¡æ‰€æœ‰æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼';
            } else if (percentage >= 70) {
                result.innerHTML += '<br>ğŸ‘ ä¸é”™ï¼ç»§ç»­åŠªåŠ›å®Œæˆå‰©ä½™å†…å®¹ï¼';
            } else {
                result.innerHTML += '<br>ğŸ’ª åŠ æ²¹ï¼è¿˜æœ‰å¾ˆå¤šçŸ¥è¯†ç­‰å¾…ä½ æŒæ¡ï¼';
            }
        }

        // ç»˜åˆ¶ç®­å¤´å‡½æ•°
        function drawArrow(ctx, x1, y1, x2, y2) {
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
            
            const angle = Math.atan2(y2 - y1, x2 - x1);
            const arrowSize = 8;
            
            ctx.beginPath();
            ctx.moveTo(x2, y2);
            ctx.lineTo(
                x2 - arrowSize * Math.cos(angle - Math.PI / 6),
                y2 - arrowSize * Math.sin(angle - Math.PI / 6)
            );
            ctx.lineTo(
                x2 - arrowSize * Math.cos(angle + Math.PI / 6),
                y2 - arrowSize * Math.sin(angle + Math.PI / 6)
            );
            ctx.closePath();
            ctx.fillStyle = "#666";
            ctx.fill();
        }

        // ========== ç¬¬ä¸€éƒ¨åˆ†ï¼šé»æ›¼å’Œå¯è§†åŒ– ==========
        const riemannCanvas = document.getElementById('riemannCanvas');
        const ctx = riemannCanvas.getContext('2d');
        
        let n = 4;
        let funcIndex = 0;
        
        const functions = [
            { name: "xÂ²", func: (x) => x*x, color: "#6a11cb", trueValue: 1/3 },
            { name: "sin(x)", func: (x) => Math.sin(x*Math.PI), color: "#2575fc", trueValue: 2/Math.PI },
            { name: "âˆšx", func: (x) => Math.sqrt(x), color: "#4caf50", trueValue: 2/3 }
        ];
        
        function drawRiemannSum() {
            const width = riemannCanvas.width;
            const height = riemannCanvas.height;
            const padding = 40;
            const graphWidth = width - 2*padding;
            const graphHeight = height - 2*padding;
            
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.beginPath();
            ctx.strokeStyle = "#333";
            ctx.lineWidth = 2;
            ctx.moveTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.stroke();
            
            // åæ ‡è½´æ ‡ç­¾
            ctx.fillStyle = "#333";
            ctx.font = "14px Arial";
            ctx.fillText("x", width - padding + 5, height - padding);
            ctx.fillText("y", padding, padding - 10);
            ctx.fillText("0", padding - 10, height - padding + 15);
            ctx.fillText("1", width - padding, height - padding + 15);
            ctx.fillText("1", padding - 15, padding);
            
            // å½“å‰å‡½æ•°
            const currentFunc = functions[funcIndex];
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            ctx.beginPath();
            ctx.strokeStyle = currentFunc.color;
            ctx.lineWidth = 3;
            
            for (let i = 0; i <= graphWidth; i++) {
                const x = i / graphWidth;
                const y = currentFunc.func(x);
                const plotX = padding + i;
                const plotY = height - padding - y * graphHeight;
                
                if (i === 0) {
                    ctx.moveTo(plotX, plotY);
                } else {
                    ctx.lineTo(plotX, plotY);
                }
            }
            ctx.stroke();
            
            // ç»˜åˆ¶çŸ©å½¢ï¼ˆé»æ›¼å’Œï¼‰
            const dx = 1 / n;
            let areaSum = 0;
            ctx.fillStyle = currentFunc.color + "40";
            
            for (let i = 0; i < n; i++) {
                const x = i / n;
                const y = currentFunc.func(x + dx/2);
                areaSum += y * dx;
                
                const rectX = padding + x * graphWidth;
                const rectY = height - padding - y * graphHeight;
                const rectWidth = graphWidth / n;
                const rectHeight = y * graphHeight;
                
                ctx.fillRect(rectX, rectY, rectWidth, rectHeight);
                ctx.strokeStyle = currentFunc.color;
                ctx.lineWidth = 1;
                ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);
            }
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('areaSum').textContent = areaSum.toFixed(4);
            document.getElementById('trueValue').textContent = currentFunc.trueValue.toFixed(4);
            
            // å›¾ä¾‹
            ctx.fillStyle = currentFunc.color;
            ctx.fillRect(padding + 10, padding + 10, 20, 20);
            ctx.fillStyle = "#333";
            ctx.fillText(`å‡½æ•°ï¼šy = ${currentFunc.name}`, padding + 40, padding + 25);
        }

        // ========== ç¬¬äºŒéƒ¨åˆ†ï¼šå˜é™ç§¯åˆ†å¯è§†åŒ– ==========
        const variableLimitCanvas = document.getElementById('variableLimitCanvas');
        const varCtx = variableLimitCanvas.getContext('2d');
        
        let currentX = 1.0;
        let varFuncIndex = 0;
        let animationId = null;
        
        const varFunctions = [
            { name: "tÂ²", func: (t) => t*t, color: "#6a11cb", integral: (x) => x*x*x/3, derivative: (x) => x*x },
            { name: "sin(t)", func: (t) => Math.sin(t*Math.PI/2), color: "#2575fc", integral: (x) => -2/Math.PI * Math.cos(x*Math.PI/2) + 2/Math.PI, derivative: (x) => Math.sin(x*Math.PI/2) },
            { name: "e^t", func: (t) => Math.exp(t)/3, color: "#4caf50", integral: (x) => (Math.exp(x)-1)/3, derivative: (x) => Math.exp(x)/3 }
        ];
        
        function drawVariableLimit() {
            const width = variableLimitCanvas.width;
            const height = variableLimitCanvas.height;
            const padding = 40;
            const graphWidth = width - 2*padding;
            const graphHeight = height - 2*padding;
            
            varCtx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            varCtx.beginPath();
            varCtx.strokeStyle = "#333";
            varCtx.lineWidth = 2;
            varCtx.moveTo(padding, height - padding);
            varCtx.lineTo(width - padding, height - padding);
            varCtx.moveTo(padding, padding);
            varCtx.lineTo(padding, height - padding);
            varCtx.stroke();
            
            // å½“å‰å‡½æ•°
            const currentFunc = varFunctions[varFuncIndex];
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            varCtx.beginPath();
            varCtx.strokeStyle = currentFunc.color;
            varCtx.lineWidth = 3;
            
            for (let i = 0; i <= graphWidth; i++) {
                const x = i / graphWidth * 2;
                const y = currentFunc.func(x);
                const plotX = padding + i/2;
                const plotY = height - padding - y * graphHeight * 2;
                
                if (i === 0) {
                    varCtx.moveTo(plotX, plotY);
                } else {
                    varCtx.lineTo(plotX, plotY);
                }
            }
            varCtx.stroke();
            
            // å¡«å……é¢ç§¯ï¼ˆä»0åˆ°currentXï¼‰
            varCtx.fillStyle = currentFunc.color + "40";
            const plotCurrentX = padding + (currentX / 2) * graphWidth;
            const currentY = currentFunc.func(currentX);
            const plotCurrentY = height - padding - currentY * graphHeight * 2;
            
            // ç»˜åˆ¶é¢ç§¯
            varCtx.beginPath();
            varCtx.moveTo(padding, height - padding);
            for (let i = 0; i <= currentX * 50; i++) {
                const x = i / 50;
                const y = currentFunc.func(x);
                const plotX = padding + (x / 2) * graphWidth;
                const plotY = height - padding - y * graphHeight * 2;
                varCtx.lineTo(plotX, plotY);
            }
            varCtx.lineTo(plotCurrentX, height - padding);
            varCtx.closePath();
            varCtx.fill();
            
            // ç»˜åˆ¶å½“å‰xçš„å‚ç›´çº¿
            varCtx.beginPath();
            varCtx.strokeStyle = "#ff5722";
            varCtx.lineWidth = 2;
            varCtx.moveTo(plotCurrentX, height - padding);
            varCtx.lineTo(plotCurrentX, plotCurrentY);
            varCtx.stroke();
            
            // ç»˜åˆ¶å½“å‰ç‚¹
            varCtx.beginPath();
            varCtx.fillStyle = "#ff5722";
            varCtx.arc(plotCurrentX, plotCurrentY, 6, 0, Math.PI * 2);
            varCtx.fill();
            
            // åæ ‡è½´æ ‡ç­¾
            varCtx.fillStyle = "#333";
            varCtx.font = "14px Arial";
            varCtx.fillText("t", width - padding + 5, height - padding);
            varCtx.fillText("f(t)", padding, padding - 10);
            varCtx.fillText("0", padding - 10, height - padding + 15);
            varCtx.fillText("2", width - padding - 10, height - padding + 15);
            
            // æ˜¾ç¤ºå½“å‰å€¼
            const areaValue = currentFunc.integral(currentX);
            const derivativeValue = currentFunc.derivative(currentX);
            
            varCtx.fillStyle = "#ff5722";
            varCtx.font = "bold 16px Arial";
            varCtx.fillText(`Î¦(${currentX.toFixed(2)}) = ${areaValue.toFixed(4)}`, width/2 - 80, padding + 30);
            varCtx.fillText(`Î¦'(${currentX.toFixed(2)}) = ${derivativeValue.toFixed(4)}`, width/2 - 80, padding + 60);
            
            // æ›´æ–°æ˜¾ç¤ºä¿¡æ¯
            document.getElementById('currentFuncDisplay').textContent = currentFunc.name;
            document.getElementById('derivativeValue').textContent = derivativeValue.toFixed(4);
            document.getElementById('currentX').textContent = currentX.toFixed(2);
        }

        // ========== ç¬¬å››éƒ¨åˆ†ï¼šç§¯åˆ†ä¸­å€¼å®šç†å¯è§†åŒ– ==========
        const meanValueCanvas = document.getElementById('meanValueCanvas');
        const meanCtx = meanValueCanvas.getContext('2d');
        
        let meanFuncIndex = 0;
        let showMeanLine = true;
        let meanPoint = null;
        
        const meanFunctions = [
            { name: "xÂ²", func: (x) => x*x, color: "#6a11cb", a: 0, b: 2 },
            { name: "sin(x)", func: (x) => Math.sin(x*Math.PI/2), color: "#2575fc", a: 0, b: 2 },
            { name: "e^x - 1", func: (x) => Math.exp(x)-1, color: "#4caf50", a: 0, b: 1 }
        ];
        
        function drawMeanValueTheorem() {
            const width = meanValueCanvas.width;
            const height = meanValueCanvas.height;
            const padding = 40;
            const graphWidth = width - 2*padding;
            const graphHeight = height - 2*padding;
            
            meanCtx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            meanCtx.beginPath();
            meanCtx.strokeStyle = "#333";
            meanCtx.lineWidth = 2;
            meanCtx.moveTo(padding, height - padding);
            meanCtx.lineTo(width - padding, height - padding);
            meanCtx.moveTo(padding, padding);
            meanCtx.lineTo(padding, height - padding);
            meanCtx.stroke();
            
            // å½“å‰å‡½æ•°
            const currentFunc = meanFunctions[meanFuncIndex];
            const a = currentFunc.a;
            const b = currentFunc.b;
            
            // è®¡ç®—å¹³å‡å€¼
            const steps = 1000;
            let integral = 0;
            const dx = (b - a) / steps;
            for (let i = 0; i < steps; i++) {
                const x = a + i * dx;
                integral += currentFunc.func(x) * dx;
            }
            const meanValue = integral / (b - a);
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            meanCtx.beginPath();
            meanCtx.strokeStyle = currentFunc.color;
            meanCtx.lineWidth = 3;
            for (let i = 0; i <= graphWidth; i++) {
                const x = a + (b - a) * i / graphWidth;
                const y = currentFunc.func(x);
                const plotX = padding + i;
                const plotY = height - padding - (y / 3) * graphHeight;
                
                if (i === 0) {
                    meanCtx.moveTo(plotX, plotY);
                } else {
                    meanCtx.lineTo(plotX, plotY);
                }
            }
            meanCtx.stroke();
            
            // ç»˜åˆ¶å¹³å‡å€¼çº¿
            if (showMeanLine) {
                meanCtx.beginPath();
                meanCtx.strokeStyle = "#ff5722";
                meanCtx.lineWidth = 2;
                meanCtx.setLineDash([5, 5]);
                const meanY = height - padding - (meanValue / 3) * graphHeight;
                meanCtx.moveTo(padding, meanY);
                meanCtx.lineTo(width - padding, meanY);
                meanCtx.stroke();
                meanCtx.setLineDash([]);
                
                meanCtx.fillStyle = "#ff5722";
                meanCtx.font = "14px Arial";
                meanCtx.fillText(`å¹³å‡å€¼: ${meanValue.toFixed(3)}`, width - padding - 100, meanY - 5);
            }
            
            // å¯»æ‰¾å¹¶ç»˜åˆ¶Î¾ç‚¹
            if (meanPoint !== null) {
                const xi = meanPoint;
                const xiY = currentFunc.func(xi);
                const plotXiX = padding + (xi - a) / (b - a) * graphWidth;
                const plotXiY = height - padding - (xiY / 3) * graphHeight;
                
                meanCtx.beginPath();
                meanCtx.fillStyle = "#ff5722";
                meanCtx.arc(plotXiX, plotXiY, 6, 0, Math.PI * 2);
                meanCtx.fill();
                
                meanCtx.fillText(`Î¾ = ${xi.toFixed(3)}`, plotXiX + 10, plotXiY - 10);
                meanCtx.fillText(`f(Î¾) = ${xiY.toFixed(3)}`, plotXiX + 10, plotXiY + 20);
                
                meanCtx.beginPath();
                meanCtx.strokeStyle = "#ff5722";
                meanCtx.lineWidth = 1;
                meanCtx.setLineDash([2, 2]);
                meanCtx.moveTo(plotXiX, plotXiY);
                meanCtx.lineTo(plotXiX, height - padding);
                meanCtx.stroke();
                meanCtx.setLineDash([]);
            }
            
            // åæ ‡è½´æ ‡ç­¾
            meanCtx.fillStyle = "#333";
            meanCtx.font = "14px Arial";
            meanCtx.fillText("x", width - padding + 5, height - padding);
            meanCtx.fillText("y", padding, padding - 10);
            meanCtx.fillText(`${a}`, padding - 10, height - padding + 15);
            meanCtx.fillText(`${b}`, width - padding, height - padding + 15);
            
            // æ›´æ–°æ˜¾ç¤ºä¿¡æ¯
            document.getElementById('meanFuncName').textContent = currentFunc.name;
            document.getElementById('meanValue').textContent = meanValue.toFixed(3);
            document.getElementById('xiPoint').textContent = meanPoint ? meanPoint.toFixed(3) : "å°šæœªè®¡ç®—";
        }

        // ========== ç¬¬äº”éƒ¨åˆ†ï¼šåè±å£«å…¬å¼å¯è§†åŒ– ==========
        const wallisCanvas = document.getElementById('wallisCanvas');
        const wallisCtx = wallisCanvas.getContext('2d');
        
        let wallisN = 1;
        let showWallisProcess = false;
        
        function drawWallisFormula() {
            const width = wallisCanvas.width;
            const height = wallisCanvas.height;
            const padding = 40;
            const graphWidth = width - 2*padding;
            const graphHeight = height - 2*padding;
            
            wallisCtx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            wallisCtx.beginPath();
            wallisCtx.strokeStyle = "#333";
            wallisCtx.lineWidth = 2;
            wallisCtx.moveTo(padding, height - padding);
            wallisCtx.lineTo(width - padding, height - padding);
            wallisCtx.moveTo(padding, padding);
            wallisCtx.lineTo(padding, height - padding);
            wallisCtx.stroke();
            
            // ç»˜åˆ¶sinâ¿xæ›²çº¿
            const colors = ["#6a11cb", "#2575fc", "#4caf50", "#ff9800", "#9c27b0"];
            wallisCtx.strokeStyle = colors[(wallisN - 1) % colors.length];
            wallisCtx.lineWidth = 3;
            wallisCtx.beginPath();
            
            for (let i = 0; i <= graphWidth; i++) {
                const x = i / graphWidth * Math.PI/2;
                const y = Math.pow(Math.sin(x), wallisN);
                const plotX = padding + i;
                const plotY = height - padding - y * graphHeight;
                
                if (i === 0) {
                    wallisCtx.moveTo(plotX, plotY);
                } else {
                    wallisCtx.lineTo(plotX, plotY);
                }
            }
            wallisCtx.stroke();
            
            // å¡«å……é¢ç§¯
            wallisCtx.fillStyle = wallisCtx.strokeStyle + "40";
            const steps = 50;
            const dx = (Math.PI/2) / steps;
            let area = 0;
            
            for (let i = 0; i < steps; i++) {
                const x = i * dx;
                const y = Math.pow(Math.sin(x + dx/2), wallisN);
                area += y * dx;
                
                const rectX = padding + (x / (Math.PI/2)) * graphWidth;
                const rectY = height - padding - y * graphHeight;
                const rectWidth = (dx / (Math.PI/2)) * graphWidth;
                const rectHeight = y * graphHeight;
                
                wallisCtx.fillRect(rectX, rectY, rectWidth, rectHeight);
            }
            
            // è®¡ç®—ç²¾ç¡®å€¼ï¼ˆç‚¹ç«å…¬å¼ï¼‰
            let exactValue = 1;
            let process = "";
            
            if (wallisN % 2 === 0) {
                let numerator = 1;
                let denominator = 1;
                process = "";
                for (let k = wallisN; k >= 2; k -= 2) {
                    numerator *= (k - 1);
                    denominator *= k;
                    process += `(${k-1}/${k})`;
                }
                exactValue = (numerator / denominator) * (Math.PI / 2);
                process += ` Ã— (Ï€/2)`;
            } else {
                let numerator = 1;
                let denominator = 1;
                process = "";
                for (let k = wallisN; k >= 3; k -= 2) {
                    numerator *= (k - 1);
                    denominator *= k;
                    process += `(${k-1}/${k})`;
                }
                if (wallisN > 1) {
                    exactValue = numerator / denominator;
                    process += ` Ã— 1`;
                } else {
                    exactValue = 1;
                    process = "1";
                }
            }
            
            // åæ ‡è½´æ ‡ç­¾
            wallisCtx.fillStyle = "#333";
            wallisCtx.font = "14px Arial";
            wallisCtx.fillText("x", width - padding + 5, height - padding);
            wallisCtx.fillText("y", padding, padding - 10);
            wallisCtx.fillText("0", padding - 10, height - padding + 15);
            wallisCtx.fillText("Ï€/2", width - padding - 15, height - padding + 15);
            wallisCtx.fillText("1", padding - 15, padding);
            
            // å›¾ä¾‹
            wallisCtx.fillStyle = wallisCtx.strokeStyle;
            wallisCtx.fillRect(padding + 10, padding + 10, 20, 20);
            wallisCtx.fillStyle = "#333";
            wallisCtx.fillText(`y = sin^${wallisN}(x)`, padding + 40, padding + 25);
            
            // æ›´æ–°æ˜¾ç¤ºä¿¡æ¯
            document.getElementById('wallisFormula').textContent = `âˆ«â‚€^{Ï€/2} sin^${wallisN}x dx`;
            document.getElementById('wallisProcess').textContent = showWallisProcess ? process : exactValue.toFixed(4);
        }

        // ========== ç¬¬å…­éƒ¨åˆ†ï¼šåå¸¸ç§¯åˆ†å¯è§†åŒ– ==========
        const improperCanvas1 = document.getElementById('improperCanvas1');
        const improperCtx1 = improperCanvas1.getContext('2d');
        const improperCanvas2 = document.getElementById('improperCanvas2');
        const improperCtx2 = improperCanvas2.getContext('2d');
        
        let upperLimit = 5;
        let improperType = 0;
        
        function drawImproperIntegral() {
            // ç¬¬ä¸€ä¸ªç”»å¸ƒï¼šæ— ç©·ç§¯åˆ† âˆ«â‚^âˆ 1/xÂ² dx
            const width1 = improperCanvas1.width;
            const height1 = improperCanvas1.height;
            const padding = 30;
            const graphWidth1 = width1 - 2*padding;
            const graphHeight1 = height1 - 2*padding;
            
            improperCtx1.clearRect(0, 0, width1, height1);
            
            // ç»˜åˆ¶åæ ‡è½´
            improperCtx1.beginPath();
            improperCtx1.strokeStyle = "#333";
            improperCtx1.lineWidth = 2;
            improperCtx1.moveTo(padding, height1 - padding);
            improperCtx1.lineTo(width1 - padding, height1 - padding);
            improperCtx1.moveTo(padding, padding);
            improperCtx1.lineTo(padding, height1 - padding);
            improperCtx1.stroke();
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿ 1/xÂ²
            improperCtx1.beginPath();
            improperCtx1.strokeStyle = "#6a11cb";
            improperCtx1.lineWidth = 3;
            
            for (let i = 0; i <= graphWidth1; i++) {
                const x = 1 + (upperLimit - 1) * i / graphWidth1;
                const y = 1 / (x * x);
                const plotX = padding + i;
                const plotY = height1 - padding - y * graphHeight1 * 4;
                
                if (i === 0) {
                    improperCtx1.moveTo(plotX, plotY);
                } else {
                    improperCtx1.lineTo(plotX, plotY);
                }
            }
            improperCtx1.stroke();
            
            // å¡«å……é¢ç§¯
            improperCtx1.fillStyle = "#6a11cb40";
            const steps1 = 50;
            const dx1 = (upperLimit - 1) / steps1;
            let area1 = 0;
            
            for (let i = 0; i < steps1; i++) {
                const x = 1 + i * dx1;
                const y = 1 / (x * x);
                area1 += y * dx1;
                
                const rectX = padding + (i / steps1) * graphWidth1;
                const rectY = height1 - padding - y * graphHeight1 * 4;
                const rectWidth = graphWidth1 / steps1;
                const rectHeight = y * graphHeight1 * 4;
                
                improperCtx1.fillRect(rectX, rectY, rectWidth, rectHeight);
            }
            
            // æé™å€¼
            const limitValue1 = 1 - 1/upperLimit;
            
            // åæ ‡è½´æ ‡ç­¾
            improperCtx1.fillStyle = "#333";
            improperCtx1.font = "12px Arial";
            improperCtx1.fillText("x", width1 - padding + 5, height1 - padding);
            improperCtx1.fillText("y", padding, padding - 10);
            improperCtx1.fillText("1", padding - 10, height1 - padding + 15);
            improperCtx1.fillText(`${upperLimit}`, width1 - padding - 10, height1 - padding + 15);
            
            // ç¬¬äºŒä¸ªç”»å¸ƒï¼šç‘•ç§¯åˆ† âˆ«â‚€Â¹ 1/âˆšx dx
            const width2 = improperCanvas2.width;
            const height2 = improperCanvas2.height;
            const graphWidth2 = width2 - 2*padding;
            const graphHeight2 = height2 - 2*padding;
            
            improperCtx2.clearRect(0, 0, width2, height2);
            
            // ç»˜åˆ¶åæ ‡è½´
            improperCtx2.beginPath();
            improperCtx2.strokeStyle = "#333";
            improperCtx2.lineWidth = 2;
            improperCtx2.moveTo(padding, height2 - padding);
            improperCtx2.lineTo(width2 - padding, height2 - padding);
            improperCtx2.moveTo(padding, padding);
            improperCtx2.lineTo(padding, height2 - padding);
            improperCtx2.stroke();
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿ 1/âˆšx
            improperCtx2.beginPath();
            improperCtx2.strokeStyle = "#2575fc";
            improperCtx2.lineWidth = 3;
            
            const lowerLimit = improperType === 0 ? 0.01 : 0.001;
            
            for (let i = 0; i <= graphWidth2; i++) {
                const x = lowerLimit + (1 - lowerLimit) * i / graphWidth2;
                const y = 1 / Math.sqrt(x);
                const plotX = padding + i;
                const plotY = height2 - padding - (y / 10) * graphHeight2;
                
                if (i === 0) {
                    improperCtx2.moveTo(plotX, plotY);
                } else {
                    improperCtx2.lineTo(plotX, plotY);
                }
            }
            improperCtx2.stroke();
            
            // å¡«å……é¢ç§¯
            improperCtx2.fillStyle = "#2575fc40";
            const steps2 = 50;
            const dx2 = (1 - lowerLimit) / steps2;
            let area2 = 0;
            
            for (let i = 0; i < steps2; i++) {
                const x = lowerLimit + i * dx2;
                const y = 1 / Math.sqrt(x);
                area2 += y * dx2;
                
                const rectX = padding + (i / steps2) * graphWidth2;
                const rectY = height2 - padding - (y / 10) * graphHeight2;
                const rectWidth = graphWidth2 / steps2;
                const rectHeight = (y / 10) * graphHeight2;
                
                improperCtx2.fillRect(rectX, rectY, rectWidth, rectHeight);
            }
            
            // æé™å€¼
            const limitValue2 = 2 * (1 - Math.sqrt(lowerLimit));
            
            // åæ ‡è½´æ ‡ç­¾
            improperCtx2.fillStyle = "#333";
            improperCtx2.font = "12px Arial";
            improperCtx2.fillText("x", width2 - padding + 5, height2 - padding);
            improperCtx2.fillText("y", padding, padding - 10);
            improperCtx2.fillText("0", padding - 10, height2 - padding + 15);
            improperCtx2.fillText("1", width2 - padding - 10, height2 - padding + 15);
            
            // æ›´æ–°æ˜¾ç¤ºä¿¡æ¯
            if (improperType === 0) {
                document.getElementById('improperFormula').textContent = `âˆ«â‚^${upperLimit} 1/xÂ² dx`;
                document.getElementById('improperLimit').textContent = limitValue1.toFixed(4);
                document.getElementById('convergence').textContent = "æ”¶æ•›";
            } else {
                document.getElementById('improperFormula').textContent = `âˆ«_{${lowerLimit.toFixed(3)}}Â¹ 1/âˆšx dx`;
                document.getElementById('improperLimit').textContent = limitValue2.toFixed(4);
                document.getElementById('convergence').textContent = "æ”¶æ•›";
            }
        }

        // ========== åˆå§‹åŒ–æ‰€æœ‰å›¾å½¢ ==========
        drawRiemannSum();
        drawVariableLimit();
        drawMeanValueTheorem();
        drawWallisFormula();
        drawImproperIntegral();

        // ========== ç»‘å®šæ‰€æœ‰æŒ‰é’®äº‹ä»¶ ==========
        
        // é»æ›¼å’ŒæŒ‰é’®
        document.getElementById('moreRectangles').addEventListener('click', () => {
            n = Math.min(50, n * 2);
            drawRiemannSum();
        });
        
        document.getElementById('fewerRectangles').addEventListener('click', () => {
            n = Math.max(2, n / 2);
            drawRiemannSum();
        });
        
        document.getElementById('changeFunction').addEventListener('click', () => {
            funcIndex = (funcIndex + 1) % functions.length;
            drawRiemannSum();
        });
        
        // å˜é™ç§¯åˆ†æŒ‰é’®
        document.getElementById('moveUpperLimit').addEventListener('click', () => {
            if (animationId) {
                clearInterval(animationId);
                animationId = null;
            }
            
            let direction = 1;
            animationId = setInterval(() => {
                currentX += 0.02 * direction;
                if (currentX >= 2) direction = -1;
                if (currentX <= 0.2) direction = 1;
                drawVariableLimit();
            }, 50);
        });
        
        document.getElementById('resetLimit').addEventListener('click', () => {
            if (animationId) {
                clearInterval(animationId);
                animationId = null;
            }
            currentX = 1.0;
            drawVariableLimit();
        });
        
        document.getElementById('changeVarFunction').addEventListener('click', () => {
            varFuncIndex = (varFuncIndex + 1) % varFunctions.length;
            drawVariableLimit();
        });
        
        // ç§¯åˆ†ä¸­å€¼å®šç†æŒ‰é’®
        document.getElementById('changeMeanFunction').addEventListener('click', () => {
            meanFuncIndex = (meanFuncIndex + 1) % meanFunctions.length;
            meanPoint = null;
            drawMeanValueTheorem();
        });
        
        document.getElementById('toggleMeanLine').addEventListener('click', () => {
            showMeanLine = !showMeanLine;
            drawMeanValueTheorem();
        });
        
        document.getElementById('findMeanPoint').addEventListener('click', () => {
            const currentFunc = meanFunctions[meanFuncIndex];
            const a = currentFunc.a;
            const b = currentFunc.b;
            
            const steps = 1000;
            let integral = 0;
            const dx = (b - a) / steps;
            for (let i = 0; i < steps; i++) {
                const x = a + i * dx;
                integral += currentFunc.func(x) * dx;
            }
            const meanValue = integral / (b - a);
            
            for (let i = 0; i <= steps; i++) {
                const x = a + i * dx;
                if (Math.abs(currentFunc.func(x) - meanValue) < 0.01) {
                    meanPoint = x;
                    break;
                }
            }
            
            if (meanPoint === null) {
                let minDiff = Infinity;
                for (let i = 0; i <= steps; i++) {
                    const x = a + i * dx;
                    const diff = Math.abs(currentFunc.func(x) - meanValue);
                    if (diff < minDiff) {
                        minDiff = diff;
                        meanPoint = x;
                    }
                }
            }
            
            drawMeanValueTheorem();
        });
        
        // åè±å£«å…¬å¼æŒ‰é’®
        document.getElementById('increasePower').addEventListener('click', () => {
            wallisN = Math.min(10, wallisN + 1);
            drawWallisFormula();
        });
        
        document.getElementById('decreasePower').addEventListener('click', () => {
            wallisN = Math.max(1, wallisN - 1);
            drawWallisFormula();
        });
        
        document.getElementById('toggleWallis').addEventListener('click', () => {
            showWallisProcess = !showWallisProcess;
            drawWallisFormula();
        });
        
        // åå¸¸ç§¯åˆ†æŒ‰é’®
        document.getElementById('increaseLimit').addEventListener('click', () => {
            upperLimit = Math.min(100, upperLimit * 1.5);
            drawImproperIntegral();
        });
        
        document.getElementById('decreaseLimit').addEventListener('click', () => {
            upperLimit = Math.max(2, upperLimit / 1.5);
            drawImproperIntegral();
        });
        
        document.getElementById('toggleImproper').addEventListener('click', () => {
            improperType = (improperType + 1) % 2;
            drawImproperIntegral();
        });

        // åˆå§‹åŒ–æ‰€æœ‰ç­”æ¡ˆä¸ºéšè—çŠ¶æ€
        document.querySelectorAll('.answer').forEach(answer => {
            answer.style.display = 'none';
        });
    </script>
</body>
</html>