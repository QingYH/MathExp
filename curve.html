<
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>空间解析几何曲面可视化</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            background: url('https://example.com/math-bg.jpg') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
        }
        #container {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        #menu {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,255,255,0.5);
        }
        select, button {
            padding: 8px 15px;
            margin: 5px;
            border: 2px solid #00ffff;
            border-radius: 5px;
            background: rgba(0,50,50,0.8);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        select:hover, button:hover {
            background: rgba(0,100,100,0.8);
            box-shadow: 0 0 10px #00ffff;
        }
        #controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
        }
        h2 {
            color: #00ffff;
            text-shadow: 0 0 5px #00ffff;
            margin-top: 0;
        }
        .equation {
            font-family: 'Courier New', monospace;
            color: #ff9900;
            margin: 10px 0;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    
    <div id="menu">
        <h2>空间解析几何曲面</h2>
        <select id="surfaceSelector">
            <option value="sphere">球面 x²+y²+z²=1</option>
            <option value="cylinder">圆柱面 x²+y²=1</option>
            <option value="cone">圆锥面 z²=x²+y²</option>
            <option value="hyperboloid1">单叶双曲面 x²+y²-z²=1</option>
            <option value="hyperboloid2">双叶双曲面 z²-x²-y²=1</option>
            <option value="paraboloid">椭圆抛物面 z=x²+y²</option>
            <option value="saddle">双曲抛物面 z=x²-y²</option>
        </select>
        <button id="drawBtn">绘制曲面</button>
    </div>
    
    <div id="controls">
        <h2>操作说明</h2>
        <p>• 鼠标拖动: 旋转视图</p>
        <p>• 滚轮滚动: 缩放视图</p>
        <p>• 右键拖动: 平移视图</p>
        <div id="equationDisplay" class="equation">当前曲面方程: x²+y²+z²=1</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    
    <script>
        let scene, camera, renderer, controls;
        let currentSurface = null;
        const equations = {
            sphere: "x² + y² + z² = 1",
            cylinder: "x² + y² = 1",
            cone: "z² = x² + y²",
            hyperboloid1: "x² + y² - z² = 1",
            hyperboloid2: "z² - x² - y² = 1",
            paraboloid: "z = x² + y²",
            saddle: "z = x² - y²"
        };

        function init() {
            // 创建场景
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x111122);
            
            // 添加环境光和定向光
            const ambientLight = new THREE.AmbientLight(0x404040);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);
            
            // 创建相机
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            
            // 创建渲染器
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('container').appendChild(renderer.domElement);
            
            // 添加坐标轴辅助
            const axesHelper = new THREE.AxesHelper(3);
            scene.add(axesHelper);
            
            // 添加轨道控制器
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.25;
            
            // 绘制默认球面
            drawSurface('sphere');
            
            // 窗口大小调整事件
            window.addEventListener('resize', onWindowResize, false);
            
            // 添加按钮事件
            document.getElementById('drawBtn').addEventListener('click', function() {
                const surfaceType = document.getElementById('surfaceSelector').value;
                drawSurface(surfaceType);
            });
            
            // 动画循环
            animate();
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        
        function drawSurface(type) {
            // 移除现有曲面
            if (currentSurface) {
                scene.remove(currentSurface);
            }
            
            // 更新方程显示
            document.getElementById('equationDisplay').textContent = `当前曲面方程: ${equations[type]}`;
            
            // 创建新曲面
            let geometry, material;
            const resolution = 50;
            
            switch(type) {
                case 'sphere':
                    geometry = new THREE.SphereGeometry(1, resolution, resolution);
                    material = new THREE.MeshPhongMaterial({ 
                        color: 0xff3333, 
                        wireframe: false,
                        transparent: true,
                        opacity: 0.9,
                        shininess: 100
                    });
                    break;
                    
                case 'cylinder':
                    geometry = new THREE.CylinderGeometry(1, 1, 4, resolution, 1, true);
                    material = new THREE.MeshPhongMaterial({ 
                        color: 0x33ff33, 
                        wireframe: false,
                        side: THREE.DoubleSide
                    });
                    break;
                    
                case 'cone':
                    geometry = new THREE.ConeGeometry(1, 2, resolution);
                    material = new THREE.MeshPhongMaterial({ 
                        color: 0x3333ff, 
                        wireframe: false,
                        side: THREE.DoubleSide
                    });
                    break;
                    
                case 'hyperboloid1':
                    geometry = createParametricGeometry((u, v, target) => {
                        const scale = 2;
                        u = u * Math.PI * 2;
                        v = v * 2 - 1;
                        const r = Math.sqrt(1 + v * v);
                        target.set(r * Math.cos(u), r * Math.sin(u), v * scale);
                    }, resolution, resolution);
                    material = new THREE.MeshPhongMaterial({ 
                        color: 0xff33ff, 
                        wireframe: false,
                        side: THREE.DoubleSide
                    });
                    break;
                    
                case 'hyperboloid2':
                    geometry = createParametricGeometry((u, v, target) => {
                        const scale = 2;
                        u = u * Math.PI * 2;
                        v = v * 2;
                        const r = Math.sqrt(1 + v * v);
                        target.set(r * Math.cos(u), r * Math.sin(u), v * scale);
                    }, resolution, resolution);
                    material = new THREE.MeshPhongMaterial({ 
                        color: 0xffff33, 
                        wireframe: false,
                        side: THREE.DoubleSide
                    });
                    break;
                    
                case 'paraboloid':
                    geometry = createParametricGeometry((u, v, target) => {
                        u = (u - 0.5) * 4;
                        v = (v - 0.5) * 4;
                        target.set(u, v, u*u + v*v - 2);
                    }, resolution, resolution);
                    material = new THREE.MeshPhongMaterial({ 
                        color: 0x33ffff, 
                        wireframe: false,
                        side: THREE.DoubleSide
                    });
                    break;
                    
                case 'saddle':
                    geometry = createParametricGeometry((u, v, target) => {
                        u = (u - 0.5) * 4;
                        v = (v - 0.5) * 4;
                        target.set(u, v, u*u - v*v);
                    }, resolution, resolution);
                    material = new THREE.MeshPhongMaterial({ 
                        color: 0xff9933, 
                        wireframe: false,
                        side: THREE.DoubleSide
                    });
                    break;
            }
            
            currentSurface = new THREE.Mesh(geometry, material);
            scene.add(currentSurface);
        }
        
        function createParametricGeometry(func, slices, stacks) {
            const geometry = new THREE.ParametricGeometry(func, slices, stacks);
            geometry.computeVertexNormals();
            return geometry;
        }
        
        // 初始化
        init();
    </script>
</body>
</html>
